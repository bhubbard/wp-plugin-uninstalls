<?php

// If uninstall not called from WordPress, then exit.
if ( ! defined( 'WP_UNINSTALL_PLUGIN' ) ) {
	exit;
}

// Delete Options
delete_option('rewrite_rules');
delete_site_option('rewrite_rules');
delete_option('wpjobportal-addon-key-error-message');
delete_site_option('wpjobportal-addon-key-error-message');
global $wpdb;
$options = $wpdb->get_col( $wpdb->prepare( "SELECT option_name FROM {$wpdb->options} WHERE option_name LIKE %s", 'transaction_key_for_%' ) );
foreach ( $options as $opt ) {
	delete_option( $opt );
	delete_site_option( $opt );
}
delete_option('_wpjsjp_session_');
delete_site_option('_wpjsjp_session_');
delete_option('wpjp_set_theme_colors');
delete_site_option('wpjp_set_theme_colors');
delete_option('wp_job_portal_activity_log_filter');
delete_site_option('wp_job_portal_activity_log_filter');
delete_option('wpjobportal_page_size');
delete_site_option('wpjobportal_page_size');
delete_option('wpjobportal_countryid_for_city');
delete_site_option('wpjobportal_countryid_for_city');
delete_option('wpjobportal_stateid_for_city');
delete_site_option('wpjobportal_stateid_for_city');
delete_option('wpjobportal_sub_categoryid');
delete_site_option('wpjobportal_sub_categoryid');
delete_option('jsjb_jm_listing_style');
delete_site_option('jsjb_jm_listing_style');
delete_option('jsjb_jh_listing_style');
delete_site_option('jsjb_jh_listing_style');
delete_option('wpjobportal_apply_visitor');
delete_site_option('wpjobportal_apply_visitor');
delete_option('wpjobportal_multiple_employers');
delete_site_option('wpjobportal_multiple_employers');
delete_option('wpjobportal_jobs_sample_data');
delete_site_option('wpjobportal_jobs_sample_data');
delete_option('wpjobportal_post_installation');
delete_site_option('wpjobportal_post_installation');
delete_option('job-hub-layout');
delete_site_option('job-hub-layout');
delete_option('sidebars_widgets');
delete_site_option('sidebars_widgets');
delete_option('job_portal_demno_id');
delete_site_option('job_portal_demno_id');
delete_option('widget_widget_woocommerce_widget_cart');
delete_site_option('widget_widget_woocommerce_widget_cart');
delete_option('widget_search');
delete_site_option('widget_search');
delete_option('widget_recent-posts');
delete_site_option('widget_recent-posts');
delete_option('widget_recent-comments');
delete_site_option('widget_recent-comments');
delete_option('widget_archives');
delete_site_option('widget_archives');
delete_option('widget_meta');
delete_site_option('widget_meta');
delete_option('widget_calendar');
delete_site_option('widget_calendar');
delete_option('widget_widget_cm_recent_comments');
delete_site_option('widget_widget_cm_recent_comments');
delete_option('widget_widget_cm_recent_posts');
delete_site_option('widget_widget_cm_recent_posts');
delete_option('widget_nav_menu');
delete_site_option('widget_nav_menu');
delete_option('widget_pages');
delete_site_option('widget_pages');
delete_option('widget_tag_cloud');
delete_site_option('widget_tag_cloud');
delete_option('widget_widget_cm_footeraboutus');
delete_site_option('widget_widget_cm_footeraboutus');
delete_option('widget_widget_cm_footerusefullinks');
delete_site_option('widget_widget_cm_footerusefullinks');
delete_option('widget_widget_cm_footervehicleimages');
delete_site_option('widget_widget_cm_footervehicleimages');
delete_option('widget_widget_cm_footercontactus');
delete_site_option('widget_widget_cm_footercontactus');
delete_option('job_manager_demo_pages_ids');
delete_site_option('job_manager_demo_pages_ids');
delete_option('job_manager_demo_post_ids');
delete_site_option('job_manager_demo_post_ids');
delete_option('job-portal-layout');
delete_site_option('job-portal-layout');
delete_option('job_portal_theme_demo_pages_ids');
delete_site_option('job_portal_theme_demo_pages_ids');
delete_option('job_portal_theme_demo_post_ids');
delete_site_option('job_portal_theme_demo_post_ids');
delete_option('job_portal_theme_demo_demo_specific_data');
delete_site_option('job_portal_theme_demo_demo_specific_data');
delete_option('widget_widget_wpj_recent_comments');
delete_site_option('widget_widget_wpj_recent_comments');
delete_option('widget_widget_wpj_recent_posts');
delete_site_option('widget_widget_wpj_recent_posts');
delete_option('widget_widget_wpj_footeraboutus');
delete_site_option('widget_widget_wpj_footeraboutus');
delete_option('widget_widget_wpj_footerusefullinks');
delete_site_option('widget_widget_wpj_footerusefullinks');
delete_option('widget_widget_wpj_footercontactus');
delete_site_option('widget_widget_wpj_footercontactus');
global $wpdb;
$options = $wpdb->get_col( $wpdb->prepare( "SELECT option_name FROM {$wpdb->options} WHERE option_name LIKE %s", 'widget_%' ) );
foreach ( $options as $opt ) {
	delete_option( $opt );
	delete_site_option( $opt );
}
delete_option('wpjobportal_addon_install_data');
delete_site_option('wpjobportal_addon_install_data');
delete_option('wpjobportal_addon_return_data');
delete_site_option('wpjobportal_addon_return_data');
delete_option('wpjobportalformresumeuserfield_ff');
delete_site_option('wpjobportalformresumeuserfield_ff');
delete_option('wpjobportalresumeeditadmin');
delete_site_option('wpjobportalresumeeditadmin');
delete_option('wpjobportal_countryid_for_stateid');
delete_site_option('wpjobportal_countryid_for_stateid');
delete_option('wpjp_currentversion');
delete_site_option('wpjp_currentversion');
delete_option('wpjobportal_do_activation_redirect');
delete_site_option('wpjobportal_do_activation_redirect');

// Delete Transients
delete_transient('wpjobportal_addon_update_flag');
delete_site_transient('wpjobportal_addon_update_flag');
global $wpdb;
$transients = $wpdb->get_col( $wpdb->prepare( "SELECT option_name FROM {$wpdb->options} WHERE option_name LIKE %s OR option_name LIKE %s", '_transient_dismiss-wpjobportal-addon-update-notice-%', '_site_transient_dismiss-wpjobportal-addon-update-notice-%' ) );
foreach ( $transients as $transient ) {
	delete_option( $transient );
}
delete_transient('wpjobportal_addon_update_temp_data');
delete_site_transient('wpjobportal_addon_update_temp_data');
delete_transient('wpjobportal_addon_update_temp_data_cdn');
delete_site_transient('wpjobportal_addon_update_temp_data_cdn');
delete_transient('wpjobportal_addon_update_temp_data_plugins');
delete_site_transient('wpjobportal_addon_update_temp_data_plugins');
delete_transient('wpjobportal_addon_update_temp_data_plugins_cdn');
delete_site_transient('wpjobportal_addon_update_temp_data_plugins_cdn');
delete_transient('wpjobportal_addon_hide_update_notice');
delete_site_transient('wpjobportal_addon_hide_update_notice');
delete_transient('wpjobportal_addon_hide_update_expired_key_notice');
delete_site_transient('wpjobportal_addon_hide_update_expired_key_notice');
delete_transient('wpjobportal-social-login-data');
delete_site_transient('wpjobportal-social-login-data');
delete_transient('wpjobportal-social-login-logout-cookies');
delete_site_transient('wpjobportal-social-login-logout-cookies');

// Clear Cron Jobs
wp_clear_scheduled_hook('wpjobportal_cronjobs_action');
wp_clear_scheduled_hook('jsjp_delete_expire_session_data');

// Clear Metadata
global $wpdb;
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", 'jobs_role' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", 'jobs_role' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", 'jobs_role' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", 'jobs_role' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", 'nickname' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", 'nickname' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", 'nickname' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", 'nickname' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", 'wpjobportal_packagepack_field' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", 'wpjobportal_packagepack_field' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", 'wpjobportal_packagepack_field' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", 'wpjobportal_packagepack_field' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", 'wpjobportal_perlistingpack_field' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", 'wpjobportal_perlistingpack_field' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", 'wpjobportal_perlistingpack_field' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", 'wpjobportal_perlistingpack_field' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", '_wpjobporta_billing_perlisting' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", '_wpjobporta_billing_perlisting' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", '_wpjobporta_billing_perlisting' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", '_wpjobporta_billing_perlisting' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", '_wp_page_template' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", '_wp_page_template' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", '_wp_page_template' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", '_wp_page_template' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", 'jh_show_header' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", 'jh_show_header' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", 'jh_show_header' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", 'jh_show_header' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", 'team_member_title' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", 'team_member_title' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", 'team_member_title' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", 'team_member_title' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", 'team_member_facebook' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", 'team_member_facebook' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", 'team_member_facebook' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", 'team_member_facebook' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", 'team_member_twitter' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", 'team_member_twitter' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", 'team_member_twitter' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", 'team_member_twitter' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", 'team_member_linkedin' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", 'team_member_linkedin' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", 'team_member_linkedin' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", 'team_member_linkedin' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", 'team_member_gplus' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", 'team_member_gplus' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", 'team_member_gplus' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", 'team_member_gplus' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", 'team_member_instagram' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", 'team_member_instagram' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", 'team_member_instagram' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", 'team_member_instagram' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", 'team_member_pinterest' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", 'team_member_pinterest' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", 'team_member_pinterest' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", 'team_member_pinterest' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", '_menu_item_numberofsubcolumns' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", '_menu_item_numberofsubcolumns' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", '_menu_item_numberofsubcolumns' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", '_menu_item_numberofsubcolumns' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", 'jp_show_header' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", 'jp_show_header' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", 'jp_show_header' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", 'jp_show_header' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", 'jp_headerimage_url' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", 'jp_headerimage_url' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", 'jp_headerimage_url' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", 'jp_headerimage_url' ) );

