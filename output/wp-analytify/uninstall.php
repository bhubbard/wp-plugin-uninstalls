<?php

// If uninstall not called from WordPress, then exit.
if ( ! defined( 'WP_UNINSTALL_PLUGIN' ) ) {
	exit;
}

// Delete Options
delete_option('analytify_profile_exception');
delete_site_option('analytify_profile_exception');
delete_option('analytify_ga4_exceptions');
delete_site_option('analytify_ga4_exceptions');
delete_option('analytify_tracking_property_info');
delete_site_option('analytify_tracking_property_info');
delete_option('wpanalytify_settings');
delete_site_option('wpanalytify_settings');
delete_option('wp-analytify-email');
delete_site_option('wp-analytify-email');
delete_option('analytics_file_aliases');
delete_site_option('analytics_file_aliases');
delete_option('analytify_logs_setup');
delete_site_option('analytify_logs_setup');
delete_option('analytify_date_differ');
delete_site_option('analytify_date_differ');
delete_option('pa_google_token');
delete_site_option('pa_google_token');
delete_option('analytify_search_console_data');
delete_site_option('analytify_search_console_data');
delete_option('wp_analytify_modules');
delete_site_option('wp_analytify_modules');
delete_option('wp-analytify-profile');
delete_site_option('wp-analytify-profile');
delete_option('analytify_current_version');
delete_site_option('analytify_current_version');
delete_option('analytify_gtag_move_to_notice');
delete_site_option('analytify_gtag_move_to_notice');
delete_option('analytify-ga4-streams');
delete_site_option('analytify-ga4-streams');
delete_option('wp-analytify-advanced');
delete_site_option('wp-analytify-advanced');
delete_option('pt_webprofile');
delete_site_option('pt_webprofile');
delete_option('pt_webprofile_dashboard');
delete_site_option('pt_webprofile_dashboard');
delete_option('analytify_code');
delete_site_option('analytify_code');
delete_option('display_tracking_code');
delete_site_option('display_tracking_code');
delete_option('post_analytics_disable_back');
delete_site_option('post_analytics_disable_back');
delete_option('post_analytics_access_back');
delete_site_option('post_analytics_access_back');
delete_option('analytify_posts_stats');
delete_site_option('analytify_posts_stats');
delete_option('post_analytics_settings_back');
delete_site_option('post_analytics_settings_back');
delete_option('post_analytics_exclude_posts_back');
delete_site_option('post_analytics_exclude_posts_back');
delete_option('wp-analytify-admin');
delete_site_option('wp-analytify-admin');
delete_option('post_analytics_exclude_posts');
delete_site_option('post_analytics_exclude_posts');
delete_option('post_analytics_exclude_categories');
delete_site_option('post_analytics_exclude_categories');
delete_option('post_analytics_exclude_tags');
delete_site_option('post_analytics_exclude_tags');
delete_option('post_analytics_exclude_custom_post_types');
delete_site_option('post_analytics_exclude_custom_post_types');
delete_option('post_analytics_exclude_roles');
delete_site_option('post_analytics_exclude_roles');
delete_option('post_analytics_exclude_ips');
delete_site_option('post_analytics_exclude_ips');
delete_option('post_analytics_exclude_domains');
delete_site_option('post_analytics_exclude_domains');
delete_option('post_analytics_exclude_terms');
delete_site_option('post_analytics_exclude_terms');
delete_option('post_analytics_exclude_author');
delete_site_option('post_analytics_exclude_author');
delete_option('post_analytics_exclude_date');
delete_site_option('post_analytics_exclude_date');
delete_option('post_analytics_exclude_meta');
delete_site_option('post_analytics_exclude_meta');
delete_option('post_analytics_exclude_taxonomies');
delete_site_option('post_analytics_exclude_taxonomies');
delete_option('post_analytics_exclude_roles_back');
delete_site_option('post_analytics_exclude_roles_back');
delete_option('post_analytics_exclude_ips_back');
delete_site_option('post_analytics_exclude_ips_back');
delete_option('post_analytics_exclude_domains_back');
delete_site_option('post_analytics_exclude_domains_back');
delete_option('post_analytics_exclude_terms_back');
delete_site_option('post_analytics_exclude_terms_back');
delete_option('post_analytics_exclude_author_back');
delete_site_option('post_analytics_exclude_author_back');
delete_option('post_analytics_exclude_date_back');
delete_site_option('post_analytics_exclude_date_back');
delete_option('post_analytics_exclude_meta_back');
delete_site_option('post_analytics_exclude_meta_back');
delete_option('post_analytics_exclude_taxonomies_back');
delete_site_option('post_analytics_exclude_taxonomies_back');
delete_option('wp-analytify-dashboard');
delete_site_option('wp-analytify-dashboard');
delete_option('analytify_free_upgrade_routine');
delete_site_option('analytify_free_upgrade_routine');
delete_option('analytify_ga4_mode');
delete_site_option('analytify_ga4_mode');
delete_option('analytify_show_rank_math_notice');
delete_site_option('analytify_show_rank_math_notice');
delete_option('rank_math_google_analytic_options');
delete_site_option('rank_math_google_analytic_options');
delete_option('analytify_admin_footer_text_rated');
delete_site_option('analytify_admin_footer_text_rated');
delete_option('analytify_authentication_date');
delete_site_option('analytify_authentication_date');
delete_option('analytify_dismiss_pointer');
delete_site_option('analytify_dismiss_pointer');
delete_option('analytify_remove_comparison_gif');
delete_site_option('analytify_remove_comparison_gif');
delete_option('analytify_deactivation_reason');
delete_site_option('analytify_deactivation_reason');
delete_option('analytify_deactivation_feedback');
delete_site_option('analytify_deactivation_feedback');
delete_option('wpb_sdk_wp-analytify');
delete_site_option('wpb_sdk_wp-analytify');
delete_option('_analytify_optin');
delete_site_option('_analytify_optin');
delete_option('wp-analytify-events-tracking');
delete_site_option('wp-analytify-events-tracking');
delete_option('wp-analytify-custom-dimensions');
delete_site_option('wp-analytify-custom-dimensions');
delete_option('wp-analytify-forms');
delete_site_option('wp-analytify-forms');
delete_option('post_analytics_token');
delete_site_option('post_analytics_token');
delete_option('analytify_token_refresh_failed_email_sent');
delete_site_option('analytify_token_refresh_failed_email_sent');
delete_option('wpa_current_version');
delete_site_option('wpa_current_version');
delete_option('analytify_mp_secrets');
delete_site_option('analytify_mp_secrets');
global $wpdb;
$options = $wpdb->get_col( $wpdb->prepare( "SELECT option_name FROM {$wpdb->options} WHERE option_name LIKE %s", 'wpb_sdk_%' ) );
foreach ( $options as $opt ) {
	delete_option( $opt );
	delete_site_option( $opt );
}
delete_option('access_role_dashboard');
delete_site_option('access_role_dashboard');
delete_option('dashboard_panels');
delete_site_option('dashboard_panels');
delete_option('profiles_list_summary');
delete_site_option('profiles_list_summary');
delete_option('analytify-ga-properties-summery');
delete_site_option('analytify-ga-properties-summery');
delete_option('analytify_reporting_property_info');
delete_site_option('analytify_reporting_property_info');
delete_option('analytify_ua_code');
delete_site_option('analytify_ua_code');
global $wpdb;
$options = $wpdb->get_col( $wpdb->prepare( "SELECT option_name FROM {$wpdb->options} WHERE option_name LIKE %s", '%_property_info' ) );
foreach ( $options as $opt ) {
	delete_option( $opt );
	delete_site_option( $opt );
}
delete_option('wp-analytify-modules');
delete_site_option('wp-analytify-modules');
delete_option('wp_analytify_pro_addons');
delete_site_option('wp_analytify_pro_addons');
delete_option('analytify_default_settings');
delete_site_option('analytify_default_settings');
delete_option('analytify_active_date');
delete_site_option('analytify_active_date');
delete_option('show_welcome_page');
delete_site_option('show_welcome_page');
delete_option('profiles_list_summary_backup');
delete_site_option('profiles_list_summary_backup');
delete_option('ga4_update_number');
delete_site_option('ga4_update_number');
delete_option('ua_update_number');
delete_site_option('ua_update_number');
delete_option('WP_ANALYTIFY_PLUGIN_VERSION');
delete_site_option('WP_ANALYTIFY_PLUGIN_VERSION');
delete_option('wp_analytify_review_dismiss_4_1_8');
delete_site_option('wp_analytify_review_dismiss_4_1_8');
delete_option('wp_analytify_active_time');
delete_site_option('wp_analytify_active_time');
delete_option('wp_analytify_buy_pro_active_time');
delete_site_option('wp_analytify_buy_pro_active_time');
delete_option('wp_analytify_buy_pro_notice');
delete_site_option('wp_analytify_buy_pro_notice');
delete_option('show_tracking_pointer_1');
delete_site_option('show_tracking_pointer_1');
delete_option('wpb_api_cache');
delete_site_option('wpb_api_cache');
delete_option('WP_ANALYTIFY_NEW_LOGIN');
delete_site_option('WP_ANALYTIFY_NEW_LOGIN');
delete_option('WP_ANALYTIFY_PLUGIN_VERSION_OLD');
delete_site_option('WP_ANALYTIFY_PLUGIN_VERSION_OLD');
delete_option('pt_webprofile_url');
delete_site_option('pt_webprofile_url');
delete_option('hide_profiles');
delete_site_option('hide_profiles');
delete_option('analytify_ga4_exception');
delete_site_option('analytify_ga4_exception');
delete_option('analytify_ga_properties_list');
delete_site_option('analytify_ga_properties_list');
delete_option('wp-analytify-mode');
delete_site_option('wp-analytify-mode');
delete_option('analytify-deprecated-auth');
delete_site_option('analytify-deprecated-auth');

// Delete Transients
delete_transient('analytify_quota_exception');
delete_site_transient('analytify_quota_exception');
delete_transient('profiles_list');
delete_site_transient('profiles_list');
delete_transient('analytify_token_request_error_logged');
delete_site_transient('analytify_token_request_error_logged');
delete_transient('analytify_token_error_logged');
delete_site_transient('analytify_token_error_logged');
delete_transient('analytify_token_response_error_logged');
delete_site_transient('analytify_token_response_error_logged');
delete_transient('analytify_token_exception_error_logged');
delete_site_transient('analytify_token_exception_error_logged');
global $wpdb;
$transients = $wpdb->get_col( $wpdb->prepare( "SELECT option_name FROM {$wpdb->options} WHERE option_name LIKE %s OR option_name LIKE %s", '_transient_%_dismissed', '_site_transient_%_dismissed' ) );
foreach ( $transients as $transient ) {
	delete_option( $transient );
}
delete_transient('analytify_api_addons');
delete_site_transient('analytify_api_addons');
delete_transient('update_plugins');
delete_site_transient('update_plugins');
delete_transient('update_themes');
delete_site_transient('update_themes');

// Clear Cron Jobs
wp_clear_scheduled_hook('analytify_email_cron_function');
wp_clear_scheduled_hook('analytify_cleanup_logs');
wp_clear_scheduled_hook('analytify_analytics_lib_cron');

// Clear Metadata
global $wpdb;
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", '_analytify_skip_tracking' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", '_analytify_skip_tracking' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", '_analytify_skip_tracking' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", '_analytify_skip_tracking' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key LIKE %s", '_analytify_log_%' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key LIKE %s", '_analytify_log_%' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key LIKE %s", '_analytify_log_%' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key LIKE %s", '_analytify_log_%' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", '_analytify_exclude_from_analytics' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", '_analytify_exclude_from_analytics' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", '_analytify_exclude_from_analytics' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", '_analytify_exclude_from_analytics' ) );

