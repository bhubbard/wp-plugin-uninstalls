<?php

// If uninstall not called from WordPress, then exit.
if ( ! defined( 'WP_UNINSTALL_PLUGIN' ) ) {
	exit;
}

// Delete Options
delete_option('ecwid_last_oauth_fail_time');
delete_site_option('ecwid_last_oauth_fail_time');
delete_option('ecwid_remove_emoji');
delete_site_option('ecwid_remove_emoji');
delete_option('ecwid_historyjs_html4mode');
delete_site_option('ecwid_historyjs_html4mode');
delete_option('ecwid_plugin_version');
delete_site_option('ecwid_plugin_version');
delete_option('ecwid-plugin-version');
delete_site_option('ecwid-plugin-version');
global $wpdb;
$options = $wpdb->get_col( $wpdb->prepare( "SELECT option_name FROM {$wpdb->options} WHERE option_name LIKE %s", 'ecwid_chameleon_colors_%' ) );
foreach ( $options as $opt ) {
	delete_option( $opt );
	delete_site_option( $opt );
}
delete_option('ecwid_use_chameleon');
delete_site_option('ecwid_use_chameleon');
delete_option('ecwid_plugin_migration_since_version');
delete_site_option('ecwid_plugin_migration_since_version');
delete_option('ecwid_fetch_url_use_file_get_contents');
delete_site_option('ecwid_fetch_url_use_file_get_contents');
delete_option('ecwid_remote_get_timeout');
delete_site_option('ecwid_remote_get_timeout');
delete_option('ecwid_support_email');
delete_site_option('ecwid_support_email');
delete_option('ecwid_enable_sso');
delete_site_option('ecwid_enable_sso');
delete_option('ecwid_disable_pb_url');
delete_site_option('ecwid_disable_pb_url');
delete_option('ecwid_use_new_search');
delete_site_option('ecwid_use_new_search');
delete_option('ecwid_use_new_categories');
delete_site_option('ecwid_use_new_categories');
delete_option('ecwid_hide_appearance_menu');
delete_site_option('ecwid_hide_appearance_menu');
delete_option('ecwid_use_js_api_to_open_store_pages');
delete_site_option('ecwid_use_js_api_to_open_store_pages');
delete_option('ecwid_use_js_api_to_open_store_categories_pages');
delete_site_option('ecwid_use_js_api_to_open_store_categories_pages');
delete_option('ecwid_print_html_catalog');
delete_site_option('ecwid_print_html_catalog');
delete_option('ecwid_hide_prefetch');
delete_site_option('ecwid_hide_prefetch');
delete_option('ecwid_hide_old_minicart');
delete_site_option('ecwid_hide_old_minicart');
delete_option('force_scriptjs_render');
delete_site_option('force_scriptjs_render');
delete_option('ecwid_hide_canonical');
delete_site_option('ecwid_hide_canonical');
delete_option('ecwid_new_static_home_page_enabled');
delete_site_option('ecwid_new_static_home_page_enabled');
delete_option('ecwid_store_page_id');
delete_site_option('ecwid_store_page_id');
delete_option('ecwid_store_page_id_auto');
delete_site_option('ecwid_store_page_id_auto');
delete_option('ecwid_disable_dashboard');
delete_site_option('ecwid_disable_dashboard');
delete_option('ecwid_error_log');
delete_site_option('ecwid_error_log');
delete_option('ecwid_last_api_cache_check');
delete_site_option('ecwid_last_api_cache_check');
delete_option('ecwid_last_transients_check');
delete_site_option('ecwid_last_transients_check');
delete_option('ecwid_show_vote_message');
delete_site_option('ecwid_show_vote_message');
delete_option('ecwid_store_shortcode_used');
delete_site_option('ecwid_store_shortcode_used');
delete_option('ecwid_store_id');
delete_site_option('ecwid_store_id');
delete_option('ecwid_enable_minicart');
delete_site_option('ecwid_enable_minicart');
delete_option('ecwid_show_categories');
delete_site_option('ecwid_show_categories');
delete_option('ecwid_show_search_box');
delete_site_option('ecwid_show_search_box');
delete_option('ecwid_pb_categoriesperrow');
delete_site_option('ecwid_pb_categoriesperrow');
delete_option('ecwid_pb_productspercolumn_grid');
delete_site_option('ecwid_pb_productspercolumn_grid');
delete_option('ecwid_pb_productsperrow_grid');
delete_site_option('ecwid_pb_productsperrow_grid');
delete_option('ecwid_pb_productsperpage_list');
delete_site_option('ecwid_pb_productsperpage_list');
delete_option('ecwid_pb_productsperpage_table');
delete_site_option('ecwid_pb_productsperpage_table');
delete_option('ecwid_pb_defaultview');
delete_site_option('ecwid_pb_defaultview');
delete_option('ecwid_pb_searchview');
delete_site_option('ecwid_pb_searchview');
delete_option('ecwid_mobile_catalog_link');
delete_site_option('ecwid_mobile_catalog_link');
delete_option('ecwid_default_category_id');
delete_site_option('ecwid_default_category_id');
delete_option('ecwid_sso_secret_key');
delete_site_option('ecwid_sso_secret_key');
delete_option('ecwid_installation_date');
delete_site_option('ecwid_installation_date');
delete_option('ecwid_is_sso_enabled');
delete_site_option('ecwid_is_sso_enabled');
delete_option('ecwid_connected_via_legacy_page_time');
delete_site_option('ecwid_connected_via_legacy_page_time');
delete_option('ecwid_oauth_scope');
delete_site_option('ecwid_oauth_scope');
delete_option('ecwid_api_check_retry_after');
delete_site_option('ecwid_api_check_retry_after');
delete_option('ecwid_plugin_data');
delete_site_option('ecwid_plugin_data');
delete_option('ecwid_time_correction');
delete_site_option('ecwid_time_correction');
delete_option('ecwid_frontpage_settings');
delete_site_option('ecwid_frontpage_settings');
delete_option('ecwid_disabled_messages');
delete_site_option('ecwid_disabled_messages');
delete_option('nav_menu_options');
delete_site_option('nav_menu_options');
delete_option('ecwid_public_token');
delete_site_option('ecwid_public_token');
delete_option('ecwid_chameleon_colors_button');
delete_site_option('ecwid_chameleon_colors_button');
delete_option('ecwid_chameleon_colors_foreground');
delete_site_option('ecwid_chameleon_colors_foreground');
delete_option('ecwid_chameleon_colors_price');
delete_site_option('ecwid_chameleon_colors_price');
delete_option('ecwid_chameleon_colors_link');
delete_site_option('ecwid_chameleon_colors_link');
delete_option('ecwid_chameleon_colors_background');
delete_site_option('ecwid_chameleon_colors_background');
delete_option('rewrite_rules');
delete_site_option('rewrite_rules');
delete_option('ecwid_live_preview_for_gutenberg_enabled');
delete_site_option('ecwid_live_preview_for_gutenberg_enabled');
delete_option('default_product_cat');
delete_site_option('default_product_cat');
delete_option('ecwid_single_product_used');
delete_site_option('ecwid_single_product_used');
delete_option('ecwid_advanced_theme_layout');
delete_site_option('ecwid_advanced_theme_layout');
delete_option('ecwid_defer_rendering');
delete_site_option('ecwid_defer_rendering');
delete_option('sidebars_widgets');
delete_site_option('sidebars_widgets');
delete_option('widget_ecwidstorelink');
delete_site_option('widget_ecwidstorelink');
delete_option('widget_ecwidfloatingshoppingcart');
delete_site_option('widget_ecwidfloatingshoppingcart');
delete_option('ecwid_cache_log');
delete_site_option('ecwid_cache_log');
delete_option('ecwid_remote_get_fails');
delete_site_option('ecwid_remote_get_fails');
delete_option('ecwid_local_base_enabled');
delete_site_option('ecwid_local_base_enabled');

// Delete Transients
global $wpdb;
$transients = $wpdb->get_col( $wpdb->prepare( "SELECT option_name FROM {$wpdb->options} WHERE option_name LIKE %s OR option_name LIKE %s", '_transient_ecwid_%', '_site_transient_ecwid_%' ) );
foreach ( $transients as $transient ) {
	delete_option( $transient );
}

// Clear Metadata
global $wpdb;
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", 'ecwid_id' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", 'ecwid_id' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", 'ecwid_id' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", 'ecwid_id' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", '_wp_page_template' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", '_wp_page_template' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", '_wp_page_template' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", '_wp_page_template' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", '_thumbnail_id' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", '_thumbnail_id' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", '_thumbnail_id' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", '_thumbnail_id' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", '_menu_item_object_id' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", '_menu_item_object_id' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", '_menu_item_object_id' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", '_menu_item_object_id' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", 'thumbnail_id' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", 'thumbnail_id' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", 'thumbnail_id' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", 'thumbnail_id' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", '_ecwid_product_id' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", '_ecwid_product_id' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", '_ecwid_product_id' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", '_ecwid_product_id' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", '_ecwid_variation_id' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", '_ecwid_variation_id' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", '_ecwid_variation_id' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", '_ecwid_variation_id' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", 'ecwid_category_id' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", 'ecwid_category_id' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", 'ecwid_category_id' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", 'ecwid_category_id' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", '_elementor_data' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", '_elementor_data' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", '_elementor_data' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", '_elementor_data' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", '_witty_builder_data' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", '_witty_builder_data' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", '_witty_builder_data' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", '_witty_builder_data' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", 'mfn-page-items' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", 'mfn-page-items' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", 'mfn-page-items' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", 'mfn-page-items' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", 'env_composer' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", 'env_composer' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", 'env_composer' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", 'env_composer' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", 'first_name' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", 'first_name' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", 'first_name' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", 'first_name' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", 'nickname' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", 'nickname' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", 'nickname' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", 'nickname' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", 'last_name' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", 'last_name' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", 'last_name' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", 'last_name' ) );

