<?php

// If uninstall not called from WordPress, then exit.
if ( ! defined( 'WP_UNINSTALL_PLUGIN' ) ) {
	exit;
}

// Delete Options
delete_option('patreon-plugin-first-activated');
delete_site_option('patreon-plugin-first-activated');
delete_option('patreon-installation-api-version');
delete_site_option('patreon-installation-api-version');
delete_option('patreon-creator-id');
delete_site_option('patreon-creator-id');
delete_option('patreon-campaign-id');
delete_site_option('patreon-campaign-id');
delete_option('patreon-client-id');
delete_site_option('patreon-client-id');
global $wpdb;
$options = $wpdb->get_col( $wpdb->prepare( "SELECT option_name FROM {$wpdb->options} WHERE option_name LIKE %s", 'patreon_api_call_count_%' ) );
foreach ( $options as $opt ) {
	delete_option( $opt );
	delete_site_option( $opt );
}
delete_option('patreon-prevent-caching-gated-content');
delete_site_option('patreon-prevent-caching-gated-content');
delete_option('patreon-post-import-in-progress');
delete_site_option('patreon-post-import-in-progress');
delete_option('patreon-manual-import-batch-last-triggered');
delete_site_option('patreon-manual-import-batch-last-triggered');
delete_option('patreon-post-import-next-cursor');
delete_site_option('patreon-post-import-next-cursor');
delete_option('patreon-update-posts');
delete_site_option('patreon-update-posts');
delete_option('patreon-sync-post-type');
delete_site_option('patreon-sync-post-type');
delete_option('patreon-sync-post-category');
delete_site_option('patreon-sync-post-category');
delete_option('patreon-sync-post-term');
delete_site_option('patreon-sync-post-term');
delete_option('patreon-post-author-for-synced-posts');
delete_site_option('patreon-post-author-for-synced-posts');
delete_option('patreon-override-synced-post-publish-date');
delete_site_option('patreon-override-synced-post-publish-date');
delete_option('patreon-auto-publish-patron-only-posts');
delete_site_option('patreon-auto-publish-patron-only-posts');
delete_option('patreon-auto-publish-public-posts');
delete_site_option('patreon-auto-publish-public-posts');
delete_option('patreon-set-featured-image');
delete_site_option('patreon-set-featured-image');
delete_option('patreon-enable-login-with-patreon');
delete_site_option('patreon-enable-login-with-patreon');
delete_option('patreon-custom-universal-banner');
delete_site_option('patreon-custom-universal-banner');
delete_option('patreon-custom-page-name');
delete_site_option('patreon-custom-page-name');
delete_option('patreon-creator-url');
delete_site_option('patreon-creator-url');
delete_option('patreon-creator-has-tiers');
delete_site_option('patreon-creator-has-tiers');
delete_option('patreon-creator-tiers');
delete_site_option('patreon-creator-tiers');
delete_option('patreon-lock-entire-site');
delete_site_option('patreon-lock-entire-site');
delete_option('patreon-hide-login-button');
delete_site_option('patreon-hide-login-button');
delete_option('patreon-creator-first-name');
delete_site_option('patreon-creator-first-name');
delete_option('patreon-currency-sign');
delete_site_option('patreon-currency-sign');
delete_option('patreon-currency-sign-behind');
delete_site_option('patreon-currency-sign-behind');
delete_option('patreon-enable-allow-admins-login-with-patreon');
delete_site_option('patreon-enable-allow-admins-login-with-patreon');
delete_option('patreon-client-secret');
delete_site_option('patreon-client-secret');
delete_option('patreon-creators-access-token');
delete_site_option('patreon-creators-access-token');
delete_option('patreon-creators-refresh-token');
delete_site_option('patreon-creators-refresh-token');
delete_option('patreon-fetch-creator-id');
delete_site_option('patreon-fetch-creator-id');
delete_option('patreon-paywall-img-url');
delete_site_option('patreon-paywall-img-url');
delete_option('patreon-paywall-blocked-img-url');
delete_site_option('patreon-paywall-blocked-img-url');
delete_option('patreon-rewrite-rules-flushed');
delete_site_option('patreon-rewrite-rules-flushed');
delete_option('patreon-can-use-api-v2');
delete_site_option('patreon-can-use-api-v2');
delete_option('patreon-enable-register-with-patreon');
delete_site_option('patreon-enable-register-with-patreon');
delete_option('patreon-enable-redirect-to-page-after-login');
delete_site_option('patreon-enable-redirect-to-page-after-login');
delete_option('patreon-enable-redirect-to-page-id');
delete_site_option('patreon-enable-redirect-to-page-id');
delete_option('patreon-protect-default-image-patreon-level');
delete_site_option('patreon-protect-default-image-patreon-level');
delete_option('patreon-enable-file-locking');
delete_site_option('patreon-enable-file-locking');
delete_option('patreon-enable-strict-oauth');
delete_site_option('patreon-enable-strict-oauth');
delete_option('patreon-sync-posts');
delete_site_option('patreon-sync-posts');
delete_option('patreon-remove-deleted-posts');
delete_site_option('patreon-remove-deleted-posts');
delete_option('patreon-last-50-conn-errors');
delete_site_option('patreon-last-50-conn-errors');
delete_option('patreon-post-sync-webhook');
delete_site_option('patreon-post-sync-webhook');
delete_option('patreon-setup-done');
delete_site_option('patreon-setup-done');
delete_option('patreon-redirect_to_setup_wizard');
delete_site_option('patreon-redirect_to_setup_wizard');
delete_option('patreon-setup-wizard-last-call-result');
delete_site_option('patreon-setup-wizard-last-call-result');
delete_option('patreon-post-sync-set-up');
delete_site_option('patreon-post-sync-set-up');
delete_option('patreon-existing-installation');
delete_site_option('patreon-existing-installation');
delete_option('patreon-creator-full-name');
delete_site_option('patreon-creator-full-name');
delete_option('patreon-creator-last-name');
delete_site_option('patreon-creator-last-name');
delete_option('patreon-wordpress-app-credentials-failure');
delete_site_option('patreon-wordpress-app-credentials-failure');
delete_option('patreon-creators-access-token-scope');
delete_site_option('patreon-creators-access-token-scope');
delete_option('patreon-creators-refresh-token-expiration');
delete_site_option('patreon-creators-refresh-token-expiration');
delete_option('patreon-show-site-disconnect-success-notice');
delete_site_option('patreon-show-site-disconnect-success-notice');
delete_option('patreon-setup-wizard-notice-dismissed');
delete_site_option('patreon-setup-wizard-notice-dismissed');
delete_option('api-version-update-notice-dismissed');
delete_site_option('api-version-update-notice-dismissed');
delete_option('api-version-update-notice-dismissed-time');
delete_site_option('api-version-update-notice-dismissed-time');
delete_option('patreon-rate-plugin-notice-shown');
delete_site_option('patreon-rate-plugin-notice-shown');
delete_option('patreon-wordpress-app-credentials-success');
delete_site_option('patreon-wordpress-app-credentials-success');
delete_option('patreon-wordpress-update-available');
delete_site_option('patreon-wordpress-update-available');
delete_option('patreon-addon-upsell-shown');
delete_site_option('patreon-addon-upsell-shown');
delete_option('patron_content_manager_pitch_shown');
delete_site_option('patron_content_manager_pitch_shown');
delete_option('patreon-critical-issues');
delete_site_option('patreon-critical-issues');
delete_option('patreon-wordpress-do-api-connectivity-check');
delete_site_option('patreon-wordpress-do-api-connectivity-check');
delete_option('patreon-setup_is_being_done');
delete_site_option('patreon-setup_is_being_done');
delete_option('patreon-first-post-import-started');
delete_site_option('patreon-first-post-import-started');
delete_option('patreon-last-non-system-notice-shown-date');
delete_site_option('patreon-last-non-system-notice-shown-date');
delete_option('patreon-last-system-notice-shown-date');
delete_site_option('patreon-last-system-notice-shown-date');
delete_option('patreon-post-sync-webhook-saved');
delete_site_option('patreon-post-sync-webhook-saved');

// Clear Cron Jobs
wp_clear_scheduled_hook('patreon_five_minute_action');

// Clear Metadata
global $wpdb;
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", 'dismissed_wp_pointers' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", 'dismissed_wp_pointers' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", 'dismissed_wp_pointers' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", 'dismissed_wp_pointers' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", 'patreon_level' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", 'patreon_level' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", 'patreon_level' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", 'patreon_level' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", 'patreon-level' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", 'patreon-level' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", 'patreon-level' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", 'patreon-level' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", 'patreon-post-id' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", 'patreon-post-id' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", 'patreon-post-id' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", 'patreon-post-id' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", 'patreon-post-url' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", 'patreon-post-url' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", 'patreon-post-url' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", 'patreon-post-url' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", 'patreon-active-patrons-only' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", 'patreon-active-patrons-only' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", 'patreon-active-patrons-only' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", 'patreon-active-patrons-only' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", 'patreon-total-patronage-level' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", 'patreon-total-patronage-level' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", 'patreon-total-patronage-level' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", 'patreon-total-patronage-level' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", 'patreon_user_id' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", 'patreon_user_id' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", 'patreon_user_id' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", 'patreon_user_id' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", 'patreon-avatar-url' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", 'patreon-avatar-url' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", 'patreon-avatar-url' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", 'patreon-avatar-url' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", 'patreon_access_token' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", 'patreon_access_token' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", 'patreon_access_token' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", 'patreon_access_token' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", 'patreon_refresh_token' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", 'patreon_refresh_token' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", 'patreon_refresh_token' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", 'patreon_refresh_token' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", 'patreon_token_expires_in' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", 'patreon_token_expires_in' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", 'patreon_token_expires_in' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", 'patreon_token_expires_in' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", 'patreon_token_minted' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", 'patreon_token_minted' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", 'patreon_token_minted' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", 'patreon_token_minted' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", 'patreon_user' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", 'patreon_user' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", 'patreon_user' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", 'patreon_user' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", 'patreon_last_logged_in' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", 'patreon_last_logged_in' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", 'patreon_last_logged_in' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", 'patreon_last_logged_in' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", 'patreon_created' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", 'patreon_created' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", 'patreon_created' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", 'patreon_created' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", 'patreon_user_last_returned_from_any_flow' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", 'patreon_user_last_returned_from_any_flow' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", 'patreon_user_last_returned_from_any_flow' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", 'patreon_user_last_returned_from_any_flow' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", 'first_name' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", 'first_name' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", 'first_name' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", 'first_name' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", 'patreon-avatar-file' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", 'patreon-avatar-file' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", 'patreon-avatar-file' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", 'patreon-avatar-file' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", 'patreon_latest_patron_info' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", 'patreon_latest_patron_info' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", 'patreon_latest_patron_info' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", 'patreon_latest_patron_info' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", 'patreon_email' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", 'patreon_email' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", 'patreon_email' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", 'patreon_email' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", 'patreon_latest_patron_info_timestamp' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", 'patreon_latest_patron_info_timestamp' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", 'patreon_latest_patron_info_timestamp' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", 'patreon_latest_patron_info_timestamp' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", 'patreon_user_details_last_updated' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", 'patreon_user_details_last_updated' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", 'patreon_user_details_last_updated' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", 'patreon_user_details_last_updated' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", 'patreon-wordpress-advanced-options-toggle' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", 'patreon-wordpress-advanced-options-toggle' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", 'patreon-wordpress-advanced-options-toggle' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", 'patreon-wordpress-advanced-options-toggle' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", 'user_firstname' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", 'user_firstname' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", 'user_firstname' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", 'user_firstname' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", 'user_lastname' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", 'user_lastname' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", 'user_lastname' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", 'user_lastname' ) );

