#!/bin/bash
# WP-CLI Uninstall Script

# Delete Options
wp option delete 'WPMR_db_checksums_cache'
wp option delete 'core_update_previous_version'
wp option delete 'wpmr_fw_settings'
wp option delete 'WPMR'
wp option delete 'WPMR_checksums'
wp db query "DELETE FROM wp_options WHERE option_name LIKE '%S_'"

# Delete Transients
wp transient delete 'WPMR_license_status'
wp transient delete 'wpmr_checksum_fetch_lock'
wp db query "DELETE FROM wp_options WHERE option_name LIKE '_transient_WPMR_log_%' OR option_name LIKE '_site_transient_WPMR_log_%'"

# Clear Cron Jobs
wp cron event delete 'wpmr_daily'
wp cron event delete 'wpmr_hourly'
wp cron event delete 'wpmr_scheduled_scan'
wp cron event delete 'wpmr_scan_monitor_event'
wp cron event delete 'wpmr_run_schema_upgrade'

# Direct DB Queries (Fallback)
wp db query "DELETE FROM wp_postmeta WHERE meta_key = 'session_tokens'"
wp db query "DELETE FROM wp_usermeta WHERE meta_key = 'session_tokens'"
wp db query "DELETE FROM wp_termmeta WHERE meta_key = 'session_tokens'"
wp db query "DELETE FROM wp_commentmeta WHERE meta_key = 'session_tokens'"
