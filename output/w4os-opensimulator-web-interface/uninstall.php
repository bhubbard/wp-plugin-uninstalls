<?php

// If uninstall not called from WordPress, then exit.
if ( ! defined( 'WP_UNINSTALL_PLUGIN' ) ) {
	exit;
}

// Delete Options
delete_option('w4os_search_url');
delete_site_option('w4os_search_url');
delete_option('w4os_grid_name');
delete_site_option('w4os_grid_name');
delete_option('w4os_login_uri');
delete_site_option('w4os_login_uri');
delete_option('w4os_popular_places_max');
delete_site_option('w4os_popular_places_max');
delete_option('w4os_web_search_max');
delete_site_option('w4os_web_search_max');
delete_option('w4os_offline_sender');
delete_site_option('w4os_offline_sender');
delete_option('w4os_hypevents_url');
delete_site_option('w4os_hypevents_url');
delete_option('w4os_db_host');
delete_site_option('w4os_db_host');
delete_option('w4os_db_database');
delete_site_option('w4os_db_database');
delete_option('w4os_db_user');
delete_site_option('w4os_db_user');
delete_option('w4os_db_pass');
delete_site_option('w4os_db_pass');
delete_option('w4os_search_db_host');
delete_site_option('w4os_search_db_host');
delete_option('w4os_search_db_database');
delete_site_option('w4os_search_db_database');
delete_option('w4os_search_db_user');
delete_site_option('w4os_search_db_user');
delete_option('w4os_search_db_pass');
delete_site_option('w4os_search_db_pass');
delete_option('w4os_economy_db_host');
delete_site_option('w4os_economy_db_host');
delete_option('w4os_economy_db_database');
delete_site_option('w4os_economy_db_database');
delete_option('w4os_economy_db_user');
delete_site_option('w4os_economy_db_user');
delete_option('w4os_economy_db_pass');
delete_site_option('w4os_economy_db_pass');
delete_option('w4os_money_script_access_key');
delete_site_option('w4os_money_script_access_key');
delete_option('w4os_currency_rate');
delete_site_option('w4os_currency_rate');
delete_option('w4os_currency_rate_per');
delete_site_option('w4os_currency_rate_per');
delete_option('w4os_currency_provider');
delete_site_option('w4os_currency_provider');
delete_option('w4os_podex_error_message');
delete_site_option('w4os_podex_error_message');
delete_option('w4os_podex_redirect_url');
delete_site_option('w4os_podex_redirect_url');
delete_option('w4os_provide_economy_helpers');
delete_site_option('w4os_provide_economy_helpers');
delete_option('w4os_provide_offline_messages');
delete_site_option('w4os_provide_offline_messages');
delete_option('w4os_provide_search');
delete_site_option('w4os_provide_search');
delete_option('w4os_search_register');
delete_site_option('w4os_search_register');
delete_option('w4os_profile_slug');
delete_site_option('w4os_profile_slug');
delete_option('w4os_provide_asset_server');
delete_site_option('w4os_provide_asset_server');
delete_option('w4os_internal_asset_server_uri');
delete_site_option('w4os_internal_asset_server_uri');
delete_option('w4os_external_asset_server_uri');
delete_site_option('w4os_external_asset_server_uri');
delete_option('w4os_assets_slug');
delete_site_option('w4os_assets_slug');
delete_option('w4os_login_page');
delete_site_option('w4os_login_page');
delete_option('w4os_flush_rewrite_rules');
delete_site_option('w4os_flush_rewrite_rules');
delete_option('w4os_economy_slug');
delete_site_option('w4os_economy_slug');
delete_option('w4os_economy_use_default_db');
delete_site_option('w4os_economy_use_default_db');
delete_option('w4os_economy_db_type');
delete_site_option('w4os_economy_db_type');
delete_option('w4os_economy_db_port');
delete_site_option('w4os_economy_db_port');
delete_option('w4os_economy_helper_uri');
delete_site_option('w4os_economy_helper_uri');
delete_option('w4os_destinations_guide_uri');
delete_site_option('w4os_destinations_guide_uri');
delete_option('w4os_helpers_slug');
delete_site_option('w4os_helpers_slug');
delete_option('w4os_offline_helper_uri');
delete_site_option('w4os_offline_helper_uri');
delete_option('w4os_search_use_robust_db');
delete_site_option('w4os_search_use_robust_db');
delete_option('w4os_search_db_type');
delete_site_option('w4os_search_db_type');
delete_option('w4os_search_db_port');
delete_site_option('w4os_search_db_port');
delete_option('w4os_websearch_url');
delete_site_option('w4os_websearch_url');
delete_option('w4os_search_use_default_db');
delete_site_option('w4os_search_use_default_db');
delete_option('w4os_db_type');
delete_site_option('w4os_db_type');
delete_option('w4os_db_port');
delete_site_option('w4os_db_port');
delete_option('w4os_profile_page');
delete_site_option('w4os_profile_page');
delete_option('w4os_configuration_instructions');
delete_site_option('w4os_configuration_instructions');
delete_option('w4os_userlist_replace_name');
delete_site_option('w4os_userlist_replace_name');
delete_option('w4os_exclude_models');
delete_site_option('w4os_exclude_models');
delete_option('w4os_exclude_nomail');
delete_site_option('w4os_exclude_nomail');
delete_option('w4os_exclude_hypergrid');
delete_site_option('w4os_exclude_hypergrid');
delete_option('w4os_db_use_default');
delete_site_option('w4os_db_use_default');
global $wpdb;
$options = $wpdb->get_col( $wpdb->prepare( "SELECT option_name FROM {$wpdb->options} WHERE option_name LIKE %s", 'w4os_exclude_%' ) );
foreach ( $options as $opt ) {
	delete_option( $opt );
	delete_site_option( $opt );
}
delete_option('w4os_updated');
delete_site_option('w4os_updated');
delete_option('w4os_upated');
delete_site_option('w4os_upated');
delete_option('w4os_sync_users');
delete_site_option('w4os_sync_users');
delete_option('w4os_model_firstname');
delete_site_option('w4os_model_firstname');
delete_option('w4os_model_lastname');
delete_site_option('w4os_model_lastname');
delete_option('w4os_provide_currency');
delete_site_option('w4os_provide_currency');
delete_option('w4os_grid_info');
delete_site_option('w4os_grid_info');
delete_option('w4os_check_urls_now');
delete_site_option('w4os_check_urls_now');
delete_option('w4os_rewrite_version');
delete_site_option('w4os_rewrite_version');
delete_option('avatars_can_register');
delete_site_option('avatars_can_register');

// Delete Transients
delete_transient('w4os_rewrite_flush');
delete_site_transient('w4os_rewrite_flush');
delete_transient('w4os_rewrite_version');
delete_site_transient('w4os_rewrite_version');
delete_transient('w4os_get_url_status_checked');
delete_site_transient('w4os_get_url_status_checked');
delete_transient('w4os_get_urls_statuses_lock');
delete_site_transient('w4os_get_urls_statuses_lock');
delete_transient('saved_user_roles');
delete_site_transient('saved_user_roles');
delete_transient('action_scheduler_last_pastdue_actions_check');
delete_site_transient('action_scheduler_last_pastdue_actions_check');
delete_transient('action_scheduler_admin_notice');
delete_site_transient('action_scheduler_admin_notice');
delete_transient('as_comment_count');
delete_site_transient('as_comment_count');

// Clear Cron Jobs
wp_clear_scheduled_hook('w4os_search_parser_cron');

// Clear Metadata
global $wpdb;
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", 'w4os_tmp_salt' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", 'w4os_tmp_salt' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", 'w4os_tmp_salt' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", 'w4os_tmp_salt' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", 'w4os_tmp_hash' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", 'w4os_tmp_hash' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", 'w4os_tmp_hash' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", 'w4os_tmp_hash' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", 'first_name' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", 'first_name' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", 'first_name' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", 'first_name' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", 'last_name' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", 'last_name' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", 'last_name' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", 'last_name' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", 'w4os_firstname' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", 'w4os_firstname' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", 'w4os_firstname' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", 'w4os_firstname' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", 'w4os_lastname' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", 'w4os_lastname' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", 'w4os_lastname' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", 'w4os_lastname' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", 'opensim_profileAllow_web' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", 'opensim_profileAllow_web' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", 'opensim_profileAllow_web' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", 'opensim_profileAllow_web' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", 'w4os_uuid' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", 'w4os_uuid' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", 'w4os_uuid' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", 'w4os_uuid' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", 'w4os_avatarname' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", 'w4os_avatarname' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", 'w4os_avatarname' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", 'w4os_avatarname' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", 'w4os_profileimage' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", 'w4os_profileimage' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", 'w4os_profileimage' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", 'w4os_profileimage' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", 'w4os_created' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", 'w4os_created' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", 'w4os_created' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", 'w4os_created' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", 'w4os_lastseen' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", 'w4os_lastseen' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", 'w4os_lastseen' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", 'w4os_lastseen' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", '_wp_page_template' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", '_wp_page_template' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", '_wp_page_template' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", '_wp_page_template' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", '_wp_attachment_image_alt' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", '_wp_attachment_image_alt' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", '_wp_attachment_image_alt' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", '_wp_attachment_image_alt' ) );

