<?php

// If uninstall not called from WordPress, then exit.
if ( ! defined( 'WP_UNINSTALL_PLUGIN' ) ) {
	exit;
}

// Delete Options
delete_option('active_sitewide_plugins');
delete_site_option('active_sitewide_plugins');
delete_option('assistify_migration_version');
delete_site_option('assistify_migration_version');
delete_option('assistify_primary_color');
delete_site_option('assistify_primary_color');
delete_option('assistify_content_default_length');
delete_site_option('assistify_content_default_length');
delete_option('assistify_content_default_tone');
delete_site_option('assistify_content_default_tone');
delete_option('woocommerce_notify_low_stock_amount');
delete_site_option('woocommerce_notify_low_stock_amount');
delete_option('woocommerce_currency_pos');
delete_site_option('woocommerce_currency_pos');
delete_option('woocommerce_weight_unit');
delete_site_option('woocommerce_weight_unit');
delete_option('woocommerce_dimension_unit');
delete_site_option('woocommerce_dimension_unit');
delete_option('woocommerce_enable_reviews');
delete_site_option('woocommerce_enable_reviews');
delete_option('woocommerce_review_rating_required');
delete_site_option('woocommerce_review_rating_required');
delete_option('woocommerce_manage_stock');
delete_site_option('woocommerce_manage_stock');
delete_option('woocommerce_hold_stock_minutes');
delete_site_option('woocommerce_hold_stock_minutes');
delete_option('woocommerce_notify_low_stock');
delete_site_option('woocommerce_notify_low_stock');
delete_option('woocommerce_notify_no_stock');
delete_site_option('woocommerce_notify_no_stock');
delete_option('woocommerce_hide_out_of_stock_items');
delete_site_option('woocommerce_hide_out_of_stock_items');
delete_option('woocommerce_calc_taxes');
delete_site_option('woocommerce_calc_taxes');
delete_option('woocommerce_prices_include_tax');
delete_site_option('woocommerce_prices_include_tax');
delete_option('woocommerce_tax_based_on');
delete_site_option('woocommerce_tax_based_on');
delete_option('woocommerce_shipping_tax_class');
delete_site_option('woocommerce_shipping_tax_class');
delete_option('woocommerce_tax_round_at_subtotal');
delete_site_option('woocommerce_tax_round_at_subtotal');
delete_option('woocommerce_tax_display_shop');
delete_site_option('woocommerce_tax_display_shop');
delete_option('woocommerce_tax_display_cart');
delete_site_option('woocommerce_tax_display_cart');
delete_option('woocommerce_tax_total_display');
delete_site_option('woocommerce_tax_total_display');
delete_option('woocommerce_ship_to_countries');
delete_site_option('woocommerce_ship_to_countries');
delete_option('woocommerce_specific_ship_to_countries');
delete_site_option('woocommerce_specific_ship_to_countries');
delete_option('woocommerce_shipping_cost_requires_address');
delete_site_option('woocommerce_shipping_cost_requires_address');
delete_option('woocommerce_shipping_debug_mode');
delete_site_option('woocommerce_shipping_debug_mode');
delete_option('woocommerce_enable_coupons');
delete_site_option('woocommerce_enable_coupons');
delete_option('woocommerce_calc_discounts_sequentially');
delete_site_option('woocommerce_calc_discounts_sequentially');
delete_option('woocommerce_enable_guest_checkout');
delete_site_option('woocommerce_enable_guest_checkout');
delete_option('woocommerce_enable_checkout_login_reminder');
delete_site_option('woocommerce_enable_checkout_login_reminder');
delete_option('woocommerce_enable_signup_and_login_from_checkout');
delete_site_option('woocommerce_enable_signup_and_login_from_checkout');
delete_option('woocommerce_registration_privacy_policy_text');
delete_site_option('woocommerce_registration_privacy_policy_text');
delete_option('woocommerce_checkout_privacy_policy_text');
delete_site_option('woocommerce_checkout_privacy_policy_text');
delete_option('woocommerce_terms_page_id');
delete_site_option('woocommerce_terms_page_id');
delete_option('woocommerce_db_version');
delete_site_option('woocommerce_db_version');
delete_option('assistify_api_key');
delete_site_option('assistify_api_key');
delete_option('assistify_ai_provider');
delete_site_option('assistify_ai_provider');
delete_option('assistify_ai_model');
delete_site_option('assistify_ai_model');
delete_option('woocommerce_store_address');
delete_site_option('woocommerce_store_address');
delete_option('woocommerce_store_city');
delete_site_option('woocommerce_store_city');
delete_option('woocommerce_store_postcode');
delete_site_option('woocommerce_store_postcode');
delete_option('woocommerce_default_country');
delete_site_option('woocommerce_default_country');
delete_option('assistify_enable_health_monitoring');
delete_site_option('assistify_enable_health_monitoring');
delete_option('woocommerce_email_from_address');
delete_site_option('woocommerce_email_from_address');
delete_option('assistify_admin_chat_enabled');
delete_site_option('assistify_admin_chat_enabled');
delete_option('assistify_chat_position');
delete_site_option('assistify_chat_position');
delete_option('assistify_api_usage');
delete_site_option('assistify_api_usage');
delete_option('assistify_version');
delete_site_option('assistify_version');
delete_option('assistify_debug_logging');
delete_site_option('assistify_debug_logging');
delete_option('assistify_db_version');
delete_site_option('assistify_db_version');
delete_option('assistify_audit_log_retention');
delete_site_option('assistify_audit_log_retention');
delete_option('assistify_image_model');
delete_site_option('assistify_image_model');
delete_option('assistify_image_size');
delete_site_option('assistify_image_size');
delete_option('assistify_image_quality');
delete_site_option('assistify_image_quality');
delete_option('assistify_image_style');
delete_site_option('assistify_image_style');
delete_option('assistify_removebg_api_key');
delete_site_option('assistify_removebg_api_key');
delete_option('assistify_removebg_size');
delete_site_option('assistify_removebg_size');
delete_option('assistify_customer_chat_enabled');
delete_site_option('assistify_customer_chat_enabled');
delete_option('assistify_guest_chat_enabled');
delete_site_option('assistify_guest_chat_enabled');
delete_option('assistify_product_context_limit');
delete_site_option('assistify_product_context_limit');
delete_option('woocommerce_bacs_accounts');
delete_site_option('woocommerce_bacs_accounts');
delete_option('woocommerce_cheque_settings');
delete_site_option('woocommerce_cheque_settings');
delete_option('woocommerce_store_address_2');
delete_site_option('woocommerce_store_address_2');
delete_option('woocommerce_store_phone');
delete_site_option('woocommerce_store_phone');
delete_option('woocommerce_free_shipping_min_amount');
delete_site_option('woocommerce_free_shipping_min_amount');
delete_option('assistify_assistant_name');
delete_site_option('assistify_assistant_name');
delete_option('assistify_show_privacy_link');
delete_site_option('assistify_show_privacy_link');
delete_option('assistify_auto_open_delay');
delete_site_option('assistify_auto_open_delay');
delete_option('assistify_auto_open_enabled');
delete_site_option('assistify_auto_open_enabled');
delete_option('assistify_sound_enabled');
delete_site_option('assistify_sound_enabled');
delete_option('assistify_custom_sound_url');
delete_site_option('assistify_custom_sound_url');
delete_option('assistify_show_ai_attribution');
delete_site_option('assistify_show_ai_attribution');
delete_option('assistify_resolved_issues');
delete_site_option('assistify_resolved_issues');
delete_option('assistify_last_cron_run');
delete_site_option('assistify_last_cron_run');
delete_option('_site_transient_timeout_update_plugins');
delete_site_option('_site_transient_timeout_update_plugins');
delete_option('assistify_alert_email');
delete_site_option('assistify_alert_email');
delete_option('assistify_alert_critical');
delete_site_option('assistify_alert_critical');
delete_option('assistify_alert_payment');
delete_site_option('assistify_alert_payment');
delete_option('assistify_alert_stock');
delete_site_option('assistify_alert_stock');
delete_option('woocommerce_email_from_name');
delete_site_option('woocommerce_email_from_name');
delete_option('assistify_image_usage');
delete_site_option('assistify_image_usage');
delete_option('assistify_remove_data_on_uninstall');
delete_site_option('assistify_remove_data_on_uninstall');

// Delete Transients
delete_transient('update_plugins');
delete_site_transient('update_plugins');
delete_transient('update_themes');
delete_site_transient('update_themes');
global $wpdb;
$transients = $wpdb->get_col( $wpdb->prepare( "SELECT option_name FROM {$wpdb->options} WHERE option_name LIKE %s OR option_name LIKE %s", '_transient_assistify_pending_action_%', '_site_transient_assistify_pending_action_%' ) );
foreach ( $transients as $transient ) {
	delete_option( $transient );
}
global $wpdb;
$transients = $wpdb->get_col( $wpdb->prepare( "SELECT option_name FROM {$wpdb->options} WHERE option_name LIKE %s OR option_name LIKE %s", '_transient_assistify_confirm_%', '_site_transient_assistify_confirm_%' ) );
foreach ( $transients as $transient ) {
	delete_option( $transient );
}
delete_transient('assistify_activation_redirect');
delete_site_transient('assistify_activation_redirect');
global $wpdb;
$transients = $wpdb->get_col( $wpdb->prepare( "SELECT option_name FROM {$wpdb->options} WHERE option_name LIKE %s OR option_name LIKE %s", '_transient_assistify_chat_history_%', '_site_transient_assistify_chat_history_%' ) );
foreach ( $transients as $transient ) {
	delete_option( $transient );
}
delete_transient('assistify_low_stock_alert');
delete_site_transient('assistify_low_stock_alert');
global $wpdb;
$transients = $wpdb->get_col( $wpdb->prepare( "SELECT option_name FROM {$wpdb->options} WHERE option_name LIKE %s OR option_name LIKE %s", '_transient_assistify_ssl_info_%', '_site_transient_assistify_ssl_info_%' ) );
foreach ( $transients as $transient ) {
	delete_option( $transient );
}
delete_transient('assistify_health_results');
delete_site_transient('assistify_health_results');
delete_transient('assistify_last_health_alert');
delete_site_transient('assistify_last_health_alert');
delete_transient('assistify_recent_order_failures');
delete_site_transient('assistify_recent_order_failures');
delete_transient('assistify_payment_spike_alert');
delete_site_transient('assistify_payment_spike_alert');
delete_transient('assistify_payment_stats');
delete_site_transient('assistify_payment_stats');
delete_transient('update_core');
delete_site_transient('update_core');

// Clear Cron Jobs
wp_clear_scheduled_hook('assistify_daily_cleanup');
wp_clear_scheduled_hook('assistify_health_check_cron');

// Clear Metadata
global $wpdb;
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", 'rating' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", 'rating' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", 'rating' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", 'rating' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", '_yoast_wpseo_metadesc' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", '_yoast_wpseo_metadesc' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", '_yoast_wpseo_metadesc' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", '_yoast_wpseo_metadesc' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", 'rank_math_description' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", 'rank_math_description' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", 'rank_math_description' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", 'rank_math_description' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", '_aioseo_description' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", '_aioseo_description' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", '_aioseo_description' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", '_aioseo_description' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", '_thumbnail_id' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", '_thumbnail_id' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", '_thumbnail_id' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", '_thumbnail_id' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", '_product_image_gallery' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", '_product_image_gallery' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", '_product_image_gallery' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", '_product_image_gallery' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", '_wp_attachment_image_alt' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", '_wp_attachment_image_alt' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", '_wp_attachment_image_alt' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", '_wp_attachment_image_alt' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", '_assistify_background_removed' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", '_assistify_background_removed' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", '_assistify_background_removed' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", '_assistify_background_removed' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", '_assistify_original_image_id' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", '_assistify_original_image_id' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", '_assistify_original_image_id' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", '_assistify_original_image_id' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", '_assistify_ai_generated' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", '_assistify_ai_generated' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", '_assistify_ai_generated' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", '_assistify_ai_generated' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", '_assistify_ai_prompt' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", '_assistify_ai_prompt' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", '_assistify_ai_prompt' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", '_assistify_ai_prompt' ) );

