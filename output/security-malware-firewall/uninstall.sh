#!/bin/bash
# WP-CLI Uninstall Script

# Delete Options
wp option delete 'spbc_rate_limit_2fa'
wp option delete 'cleantalk_settings'
wp option delete 'active_sitewide_plugins'
wp option delete 'spbc_confirmation_code'
wp option delete 'spbc_network_misc_disable_file_editor'
wp option delete 'spbc_upload_dirs_stat'
wp option delete 'spbc_upload_urls_stat'
wp option delete 'spbc_activation__redirect'
wp option delete 'spbc_api_servers_last_checked'
wp option delete 'spbc_api_servers_by_response_time'
wp option delete 'spbc_deactivation_in_process'
wp option delete 'spbc_hide_wpconfig_error_banner'
wp option delete 'spbc_rate_limit_fswatcher'
wp option delete 'spbc_fw_update_queue'
wp option delete 'spbc_plugins'
wp option delete 'spbc_themes'
wp option delete 'spbc_network_settings'
wp option delete 'spbc_settings'
wp option delete 'spbc_errors'
wp option delete 'spbc_data'
wp option delete 'spbc_cron'
wp option delete 'spbc_login_attempts'
wp option delete 'spbc_vulnerabilities'

# Clear Cron Jobs
wp cron event delete 'spbc_send_logs_hook'
wp cron event delete 'spbc_security_firewall_update_hook'
wp cron event delete 'spbc_send_firewall_logs_hook'
wp cron event delete 'spbc_send_logs_hourly_hook'
wp cron event delete 'spbc_send_daily_report'
wp cron event delete 'spbc_send_daily_report_hook'
wp cron event delete 'spbc_security_firewall_update_hourly_hook'
wp cron event delete 'spbc_send_firewall_logs_hourly_hook'
wp cron event delete 'spbc_send_report_hook'
wp cron event delete 'spbc_access_key_notices_hook'

# Direct DB Queries (Fallback)
wp db query "DELETE FROM wp_postmeta WHERE meta_key = 'spbc_2fa_type'"
wp db query "DELETE FROM wp_usermeta WHERE meta_key = 'spbc_2fa_type'"
wp db query "DELETE FROM wp_termmeta WHERE meta_key = 'spbc_2fa_type'"
wp db query "DELETE FROM wp_commentmeta WHERE meta_key = 'spbc_2fa_type'"
wp db query "DELETE FROM wp_postmeta WHERE meta_key = 'spbc_2fa_app_token'"
wp db query "DELETE FROM wp_usermeta WHERE meta_key = 'spbc_2fa_app_token'"
wp db query "DELETE FROM wp_termmeta WHERE meta_key = 'spbc_2fa_app_token'"
wp db query "DELETE FROM wp_commentmeta WHERE meta_key = 'spbc_2fa_app_token'"
wp db query "DELETE FROM wp_postmeta WHERE meta_key = '_spbc_last_login'"
wp db query "DELETE FROM wp_usermeta WHERE meta_key = '_spbc_last_login'"
wp db query "DELETE FROM wp_termmeta WHERE meta_key = '_spbc_last_login'"
wp db query "DELETE FROM wp_commentmeta WHERE meta_key = '_spbc_last_login'"
wp db query "DELETE FROM wp_postmeta WHERE meta_key = 'spbc_browser_sign'"
wp db query "DELETE FROM wp_usermeta WHERE meta_key = 'spbc_browser_sign'"
wp db query "DELETE FROM wp_termmeta WHERE meta_key = 'spbc_browser_sign'"
wp db query "DELETE FROM wp_commentmeta WHERE meta_key = 'spbc_browser_sign'"
wp db query "DELETE FROM wp_postmeta WHERE meta_key = 'spbc_browser_sign__updated'"
wp db query "DELETE FROM wp_usermeta WHERE meta_key = 'spbc_browser_sign__updated'"
wp db query "DELETE FROM wp_termmeta WHERE meta_key = 'spbc_browser_sign__updated'"
wp db query "DELETE FROM wp_commentmeta WHERE meta_key = 'spbc_browser_sign__updated'"
wp db query "DELETE FROM wp_postmeta WHERE meta_key = 'spbc_user_agent'"
wp db query "DELETE FROM wp_usermeta WHERE meta_key = 'spbc_user_agent'"
wp db query "DELETE FROM wp_termmeta WHERE meta_key = 'spbc_user_agent'"
wp db query "DELETE FROM wp_commentmeta WHERE meta_key = 'spbc_user_agent'"
wp db query "DELETE FROM wp_postmeta WHERE meta_key = '_spbc_frontend__last_checked'"
wp db query "DELETE FROM wp_usermeta WHERE meta_key = '_spbc_frontend__last_checked'"
wp db query "DELETE FROM wp_termmeta WHERE meta_key = '_spbc_frontend__last_checked'"
wp db query "DELETE FROM wp_commentmeta WHERE meta_key = '_spbc_frontend__last_checked'"
wp db query "DELETE FROM wp_postmeta WHERE meta_key = '_spbc_frontend__approved'"
wp db query "DELETE FROM wp_usermeta WHERE meta_key = '_spbc_frontend__approved'"
wp db query "DELETE FROM wp_termmeta WHERE meta_key = '_spbc_frontend__approved'"
wp db query "DELETE FROM wp_commentmeta WHERE meta_key = '_spbc_frontend__approved'"
wp db query "DELETE FROM wp_postmeta WHERE meta_key = 'spbc_frontend__last_checked'"
wp db query "DELETE FROM wp_usermeta WHERE meta_key = 'spbc_frontend__last_checked'"
wp db query "DELETE FROM wp_termmeta WHERE meta_key = 'spbc_frontend__last_checked'"
wp db query "DELETE FROM wp_commentmeta WHERE meta_key = 'spbc_frontend__last_checked'"
wp db query "DELETE FROM wp_postmeta WHERE meta_key = '_spbc_links_checked'"
wp db query "DELETE FROM wp_usermeta WHERE meta_key = '_spbc_links_checked'"
wp db query "DELETE FROM wp_termmeta WHERE meta_key = '_spbc_links_checked'"
wp db query "DELETE FROM wp_commentmeta WHERE meta_key = '_spbc_links_checked'"
wp db query "DELETE FROM wp_postmeta WHERE meta_key = 'spbc_links_checked'"
wp db query "DELETE FROM wp_usermeta WHERE meta_key = 'spbc_links_checked'"
wp db query "DELETE FROM wp_termmeta WHERE meta_key = 'spbc_links_checked'"
wp db query "DELETE FROM wp_commentmeta WHERE meta_key = 'spbc_links_checked'"
