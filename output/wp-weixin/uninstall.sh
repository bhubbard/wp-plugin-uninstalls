#!/bin/bash
# WP-CLI Uninstall Script

# Delete Options
wp option delete 'wp_weixin_settings'
wp option delete 'wp_weixin_auth_blog_id'
wp option delete 'wp_weixin_pay_blog_id'
wp db query "DELETE FROM wp_options WHERE option_name LIKE 'wp_weixin_access_token_%'"
wp db query "DELETE FROM wp_options WHERE option_name LIKE 'wp_weixin_access_token_expiry_%'"
wp option delete 'wp_weixin_plugin_version'

# Delete Transients
wp transient delete 'wp_weixin_subscribe_qr_url'
wp db query "DELETE FROM wp_options WHERE option_name LIKE '_transient_wp_weixin_qr_%' OR option_name LIKE '_site_transient_wp_weixin_qr_%'"
wp transient delete 'wp_weixin_flush'
wp transient delete 'wp_weixin_requesting_token'
wp transient delete 'wp_weixin_jsapi_ticket'

# Direct DB Queries (Fallback)
wp db query "DELETE FROM wp_postmeta WHERE meta_key LIKE 'wx_openid-%'"
wp db query "DELETE FROM wp_usermeta WHERE meta_key LIKE 'wx_openid-%'"
wp db query "DELETE FROM wp_termmeta WHERE meta_key LIKE 'wx_openid-%'"
wp db query "DELETE FROM wp_commentmeta WHERE meta_key LIKE 'wx_openid-%'"
wp db query "DELETE FROM wp_postmeta WHERE meta_key = 'wx_follower'"
wp db query "DELETE FROM wp_usermeta WHERE meta_key = 'wx_follower'"
wp db query "DELETE FROM wp_termmeta WHERE meta_key = 'wx_follower'"
wp db query "DELETE FROM wp_commentmeta WHERE meta_key = 'wx_follower'"
wp db query "DELETE FROM wp_postmeta WHERE meta_key = 'wp_weixin_before_subscription'"
wp db query "DELETE FROM wp_usermeta WHERE meta_key = 'wp_weixin_before_subscription'"
wp db query "DELETE FROM wp_termmeta WHERE meta_key = 'wp_weixin_before_subscription'"
wp db query "DELETE FROM wp_commentmeta WHERE meta_key = 'wp_weixin_before_subscription'"
wp db query "DELETE FROM wp_postmeta WHERE meta_key = 'wx_unionid'"
wp db query "DELETE FROM wp_usermeta WHERE meta_key = 'wx_unionid'"
wp db query "DELETE FROM wp_termmeta WHERE meta_key = 'wx_unionid'"
wp db query "DELETE FROM wp_commentmeta WHERE meta_key = 'wx_unionid'"
wp db query "DELETE FROM wp_postmeta WHERE meta_key = 'wp_weixin_rawdata'"
wp db query "DELETE FROM wp_usermeta WHERE meta_key = 'wp_weixin_rawdata'"
wp db query "DELETE FROM wp_termmeta WHERE meta_key = 'wp_weixin_rawdata'"
wp db query "DELETE FROM wp_commentmeta WHERE meta_key = 'wp_weixin_rawdata'"
wp db query "DELETE FROM wp_postmeta WHERE meta_key = '_menu_item_url'"
wp db query "DELETE FROM wp_usermeta WHERE meta_key = '_menu_item_url'"
wp db query "DELETE FROM wp_termmeta WHERE meta_key = '_menu_item_url'"
wp db query "DELETE FROM wp_commentmeta WHERE meta_key = '_menu_item_url'"
wp db query "DELETE FROM wp_postmeta WHERE meta_key = '_menu_item_type'"
wp db query "DELETE FROM wp_usermeta WHERE meta_key = '_menu_item_type'"
wp db query "DELETE FROM wp_termmeta WHERE meta_key = '_menu_item_type'"
wp db query "DELETE FROM wp_commentmeta WHERE meta_key = '_menu_item_type'"
wp db query "DELETE FROM wp_postmeta WHERE meta_key = '_menu_item_menu_item_parent'"
wp db query "DELETE FROM wp_usermeta WHERE meta_key = '_menu_item_menu_item_parent'"
wp db query "DELETE FROM wp_termmeta WHERE meta_key = '_menu_item_menu_item_parent'"
wp db query "DELETE FROM wp_commentmeta WHERE meta_key = '_menu_item_menu_item_parent'"
wp db query "DELETE FROM wp_postmeta WHERE meta_key = '_menu_item_object_id'"
wp db query "DELETE FROM wp_usermeta WHERE meta_key = '_menu_item_object_id'"
wp db query "DELETE FROM wp_termmeta WHERE meta_key = '_menu_item_object_id'"
wp db query "DELETE FROM wp_commentmeta WHERE meta_key = '_menu_item_object_id'"
wp db query "DELETE FROM wp_postmeta WHERE meta_key = '_menu_item_object'"
wp db query "DELETE FROM wp_usermeta WHERE meta_key = '_menu_item_object'"
wp db query "DELETE FROM wp_termmeta WHERE meta_key = '_menu_item_object'"
wp db query "DELETE FROM wp_commentmeta WHERE meta_key = '_menu_item_object'"
wp db query "DELETE FROM wp_postmeta WHERE meta_key = '_menu_item_target'"
wp db query "DELETE FROM wp_usermeta WHERE meta_key = '_menu_item_target'"
wp db query "DELETE FROM wp_termmeta WHERE meta_key = '_menu_item_target'"
wp db query "DELETE FROM wp_commentmeta WHERE meta_key = '_menu_item_target'"
wp db query "DELETE FROM wp_postmeta WHERE meta_key = '_menu_item_classes'"
wp db query "DELETE FROM wp_usermeta WHERE meta_key = '_menu_item_classes'"
wp db query "DELETE FROM wp_termmeta WHERE meta_key = '_menu_item_classes'"
wp db query "DELETE FROM wp_commentmeta WHERE meta_key = '_menu_item_classes'"
wp db query "DELETE FROM wp_postmeta WHERE meta_key = '_menu_item_xfn'"
wp db query "DELETE FROM wp_usermeta WHERE meta_key = '_menu_item_xfn'"
wp db query "DELETE FROM wp_termmeta WHERE meta_key = '_menu_item_xfn'"
wp db query "DELETE FROM wp_commentmeta WHERE meta_key = '_menu_item_xfn'"
wp db query "DELETE FROM wp_postmeta WHERE meta_key = '_menu_item_orphaned'"
wp db query "DELETE FROM wp_usermeta WHERE meta_key = '_menu_item_orphaned'"
wp db query "DELETE FROM wp_termmeta WHERE meta_key = '_menu_item_orphaned'"
wp db query "DELETE FROM wp_commentmeta WHERE meta_key = '_menu_item_orphaned'"
wp db query "DELETE FROM wp_postmeta WHERE meta_key = 'wechat_link_title'"
wp db query "DELETE FROM wp_usermeta WHERE meta_key = 'wechat_link_title'"
wp db query "DELETE FROM wp_termmeta WHERE meta_key = 'wechat_link_title'"
wp db query "DELETE FROM wp_commentmeta WHERE meta_key = 'wechat_link_title'"
wp db query "DELETE FROM wp_postmeta WHERE meta_key = 'wechat_link_description'"
wp db query "DELETE FROM wp_usermeta WHERE meta_key = 'wechat_link_description'"
wp db query "DELETE FROM wp_termmeta WHERE meta_key = 'wechat_link_description'"
wp db query "DELETE FROM wp_commentmeta WHERE meta_key = 'wechat_link_description'"
wp db query "DELETE FROM wp_postmeta WHERE meta_key = 'wechat_link_thumb_url'"
wp db query "DELETE FROM wp_usermeta WHERE meta_key = 'wechat_link_thumb_url'"
wp db query "DELETE FROM wp_termmeta WHERE meta_key = 'wechat_link_thumb_url'"
wp db query "DELETE FROM wp_commentmeta WHERE meta_key = 'wechat_link_thumb_url'"
wp db query "DELETE FROM wp_postmeta WHERE meta_key = 'wp_weixin_language'"
wp db query "DELETE FROM wp_usermeta WHERE meta_key = 'wp_weixin_language'"
wp db query "DELETE FROM wp_termmeta WHERE meta_key = 'wp_weixin_language'"
wp db query "DELETE FROM wp_commentmeta WHERE meta_key = 'wp_weixin_language'"
wp db query "DELETE FROM wp_postmeta WHERE meta_key = 'wp_weixin_headimgurl'"
wp db query "DELETE FROM wp_usermeta WHERE meta_key = 'wp_weixin_headimgurl'"
wp db query "DELETE FROM wp_termmeta WHERE meta_key = 'wp_weixin_headimgurl'"
wp db query "DELETE FROM wp_commentmeta WHERE meta_key = 'wp_weixin_headimgurl'"
