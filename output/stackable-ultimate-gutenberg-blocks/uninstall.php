<?php

// If uninstall not called from WordPress, then exit.
if ( ! defined( 'WP_UNINSTALL_PLUGIN' ) ) {
	exit;
}

// Delete Options
delete_option('stackable_other_stackable_plugin_info');
delete_site_option('stackable_other_stackable_plugin_info');
delete_option('stackable_activation_date');
delete_site_option('stackable_activation_date');
delete_option('stackable_current_version_installed');
delete_site_option('stackable_current_version_installed');
delete_option('stackable_notice_gutenberg_plugin_ignore');
delete_site_option('stackable_notice_gutenberg_plugin_ignore');
delete_option('stackable_dynamic_content_other_fields_frontend');
delete_site_option('stackable_dynamic_content_other_fields_frontend');
delete_option('stackable_dynamic_content_meta_keys_frontend');
delete_site_option('stackable_dynamic_content_meta_keys_frontend');
delete_option('stackable_inspector_premium_notice_status');
delete_site_option('stackable_inspector_premium_notice_status');
delete_option('stackable_enable_navigation_panel');
delete_site_option('stackable_enable_navigation_panel');
delete_option('stackable_custom_php_sigs');
delete_site_option('stackable_custom_php_sigs');
delete_option('stackable_disp_cond_custom_php_sigs');
delete_site_option('stackable_disp_cond_custom_php_sigs');
delete_option('stackable_google_maps_api_key');
delete_site_option('stackable_google_maps_api_key');
delete_option('stackable_optimize_inline_css');
delete_site_option('stackable_optimize_inline_css');
delete_option('stackable_block_styles');
delete_site_option('stackable_block_styles');
delete_option('stackable_block_edit_posts');
delete_site_option('stackable_block_edit_posts');
delete_option('stackable_enable_block_defaults');
delete_site_option('stackable_enable_block_defaults');
delete_option('stackable_disabled_blocks');
delete_site_option('stackable_disabled_blocks');
delete_option('stackable_block_states');
delete_site_option('stackable_block_states');
delete_option('stackable_icons_fa_free_version');
delete_site_option('stackable_icons_fa_free_version');
delete_option('stackable_global_container_mode_color_scheme');
delete_site_option('stackable_global_container_mode_color_scheme');
delete_option('stackable_use_v3_16_0_color_scheme_inheritance');
delete_site_option('stackable_use_v3_16_0_color_scheme_inheritance');
delete_option('stackable_global_colors_native_compatibility');
delete_site_option('stackable_global_colors_native_compatibility');
delete_option('stackable_global_colors');
delete_site_option('stackable_global_colors');
delete_option('stackable_v2_disabled_blocks');
delete_site_option('stackable_v2_disabled_blocks');
delete_option('stackable_v2_editor_compatibility');
delete_site_option('stackable_v2_editor_compatibility');
delete_option('stackable_v2_editor_compatibility_usage');
delete_site_option('stackable_v2_editor_compatibility_usage');
delete_option('stackable_v2_frontend_compatibility');
delete_site_option('stackable_v2_frontend_compatibility');
delete_option('stackable_v2_block_detector_disabled');
delete_site_option('stackable_v2_block_detector_disabled');
delete_option('stackable_v2_frontend_detector_counter');
delete_site_option('stackable_v2_frontend_detector_counter');
delete_option('stackable_optimize_script_load');
delete_site_option('stackable_optimize_script_load');
delete_option('stackable_dynamic_breakpoints');
delete_site_option('stackable_dynamic_breakpoints');
delete_option('stackable_hide_cimo_notice');
delete_site_option('stackable_hide_cimo_notice');
delete_option('stackable_enable_design_library');
delete_site_option('stackable_enable_design_library');
delete_option('stackable_block_default_width');
delete_site_option('stackable_block_default_width');
delete_option('stackable_block_wide_width');
delete_site_option('stackable_block_wide_width');
delete_option('stackable_auto_collapse_panels');
delete_site_option('stackable_auto_collapse_panels');
delete_option('stackable_enable_global_settings');
delete_site_option('stackable_enable_global_settings');
delete_option('stackable_enable_block_linking');
delete_site_option('stackable_enable_block_linking');
delete_option('stackable_help_tooltip_disabled');
delete_site_option('stackable_help_tooltip_disabled');
delete_option('stackable_enable_text_highlight');
delete_site_option('stackable_enable_text_highlight');
delete_option('stackable_enable_dynamic_content');
delete_site_option('stackable_enable_dynamic_content');
delete_option('stackable_enable_copy_paste_styles');
delete_site_option('stackable_enable_copy_paste_styles');
delete_option('stackable_enable_reset_layout');
delete_site_option('stackable_enable_reset_layout');
delete_option('stackable_enable_save_as_default_block');
delete_site_option('stackable_enable_save_as_default_block');
delete_option('stackable_enable_text_default_block');
delete_site_option('stackable_enable_text_default_block');
delete_option('stackable_global_typography');
delete_site_option('stackable_global_typography');
delete_option('stackable_global_force_typography');
delete_site_option('stackable_global_force_typography');
delete_option('stackable_global_hide_theme_colors');
delete_site_option('stackable_global_hide_theme_colors');
delete_option('stackable_global_hide_default_colors');
delete_site_option('stackable_global_hide_default_colors');
delete_option('stackable_global_hide_site_editor_colors');
delete_site_option('stackable_global_hide_site_editor_colors');
delete_option('stackable_global_typography_apply_to');
delete_site_option('stackable_global_typography_apply_to');
delete_option('stackable_selected_font_pair');
delete_site_option('stackable_selected_font_pair');
delete_option('stackable_custom_font_pairs');
delete_site_option('stackable_custom_font_pairs');
delete_option('stackable_use_typography_as_presets');
delete_site_option('stackable_use_typography_as_presets');
delete_option('stackable_is_apply_body_to_html');
delete_site_option('stackable_is_apply_body_to_html');
delete_option('stackable_icon_library');
delete_site_option('stackable_icon_library');
delete_option('stackable_global_colors_palette_only');
delete_site_option('stackable_global_colors_palette_only');
delete_option('stackable_global_block_styles');
delete_site_option('stackable_global_block_styles');
delete_option('stackable_global_buttons_and_icons');
delete_site_option('stackable_global_buttons_and_icons');
delete_option('stackable_global_color_schemes');
delete_site_option('stackable_global_color_schemes');
delete_option('stackable_global_hide_color_scheme_colors');
delete_site_option('stackable_global_hide_color_scheme_colors');
delete_option('stackable_global_base_color_scheme');
delete_site_option('stackable_global_base_color_scheme');
delete_option('stackable_global_background_mode_color_scheme');
delete_site_option('stackable_global_background_mode_color_scheme');
delete_option('stackable_global_color_scheme_generated_css');
delete_site_option('stackable_global_color_scheme_generated_css');
delete_option('stackable_use_size_presets_by_default');
delete_site_option('stackable_use_size_presets_by_default');
delete_option('stackable_global_custom_preset_controls');
delete_site_option('stackable_global_custom_preset_controls');
delete_option('stackable_global_spacing_and_borders');
delete_site_option('stackable_global_spacing_and_borders');
delete_option('stackable_disable_block_style_inheritance');
delete_site_option('stackable_disable_block_style_inheritance');
delete_option('stackable_show_pro_notices');
delete_site_option('stackable_show_pro_notices');
delete_option('stackable_pro_notice_start_date');
delete_site_option('stackable_pro_notice_start_date');
delete_option('stackable_guided_tour_states');
delete_site_option('stackable_guided_tour_states');
delete_option('stackable_redirect_to_welcome');
delete_site_option('stackable_redirect_to_welcome');
delete_option('stackable_notifications_dismissed');
delete_site_option('stackable_notifications_dismissed');

// Delete Transients
delete_transient('stackable_get_design_library_v3');
delete_site_transient('stackable_get_design_library_v3');
global $wpdb;
$transients = $wpdb->get_col( $wpdb->prepare( "SELECT option_name FROM {$wpdb->options} WHERE option_name LIKE %s OR option_name LIKE %s", '_transient_stackable_get_block_designs_v2_%', '_site_transient_stackable_get_block_designs_v2_%' ) );
foreach ( $transients as $transient ) {
	delete_option( $transient );
}
delete_transient('stackable_get_design_library');
delete_site_transient('stackable_get_design_library');
delete_transient('stackable_get_design_library_json_v4');
delete_site_transient('stackable_get_design_library_json_v4');
delete_transient('stackable_get_design_library_v4');
delete_site_transient('stackable_get_design_library_v4');
delete_transient('stackable_get_design_library_pages_v4');
delete_site_transient('stackable_get_design_library_pages_v4');
delete_transient('stackable_block_style_inheritance_hash');
delete_site_transient('stackable_block_style_inheritance_hash');
delete_transient('stackable_block_style_inheritance_css');
delete_site_transient('stackable_block_style_inheritance_css');
delete_transient('stackable_news_feed_links');
delete_site_transient('stackable_news_feed_links');
delete_transient('stackable_update_article');
delete_site_transient('stackable_update_article');

// Clear Metadata
global $wpdb;
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", 'stackable_optimized_css' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", 'stackable_optimized_css' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", 'stackable_optimized_css' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", 'stackable_optimized_css' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", 'stackable_optimized_css_raw' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", 'stackable_optimized_css_raw' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", 'stackable_optimized_css_raw' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", 'stackable_optimized_css_raw' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", 'stk_block_name' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", 'stk_block_name' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", 'stk_block_name' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", 'stk_block_name' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", 'stk_block_title' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", 'stk_block_title' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", 'stk_block_title' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", 'stk_block_title' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", 'stk_style_slug' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", 'stk_style_slug' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", 'stk_style_slug' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", 'stk_style_slug' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", '_wp_attachment_image_alt' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", '_wp_attachment_image_alt' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", '_wp_attachment_image_alt' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", '_wp_attachment_image_alt' ) );

