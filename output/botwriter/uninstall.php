<?php

// If uninstall not called from WordPress, then exit.
if ( ! defined( 'WP_UNINSTALL_PLUGIN' ) ) {
	exit;
}

// Delete Options
delete_option('botwriter_welcome_dismissed');
delete_site_option('botwriter_welcome_dismissed');
delete_option('botwriter_install_date');
delete_site_option('botwriter_install_date');
delete_option('botwriter_api_key');
delete_site_option('botwriter_api_key');
delete_option('botwriter_paused_tasks');
delete_site_option('botwriter_paused_tasks');
delete_option('botwriter_email');
delete_site_option('botwriter_email');
delete_option('botwriter_email_confirmed');
delete_site_option('botwriter_email_confirmed');
delete_option('botwriter_cron_active');
delete_site_option('botwriter_cron_active');
delete_option('botwriter_ai_image_size');
delete_site_option('botwriter_ai_image_size');
delete_option('botwriter_sslverify');
delete_site_option('botwriter_sslverify');
delete_option('botwriter_openai_model');
delete_site_option('botwriter_openai_model');
delete_option('botwriter_ai_image_quality');
delete_site_option('botwriter_ai_image_quality');
delete_option('botwriter_tags_disabled');
delete_site_option('botwriter_tags_disabled');
delete_option('botwriter_text_provider');
delete_site_option('botwriter_text_provider');
delete_option('botwriter_custom_text_url');
delete_site_option('botwriter_custom_text_url');
delete_option('botwriter_ai_image_style');
delete_site_option('botwriter_ai_image_style');
delete_option('botwriter_ai_image_style_custom');
delete_site_option('botwriter_ai_image_style_custom');
delete_option('botwriter_image_provider');
delete_site_option('botwriter_image_provider');
delete_option('botwriter_openai_api_key');
delete_site_option('botwriter_openai_api_key');
delete_option('botwriter_anthropic_api_key');
delete_site_option('botwriter_anthropic_api_key');
delete_option('botwriter_google_api_key');
delete_site_option('botwriter_google_api_key');
delete_option('botwriter_mistral_api_key');
delete_site_option('botwriter_mistral_api_key');
delete_option('botwriter_groq_api_key');
delete_site_option('botwriter_groq_api_key');
delete_option('botwriter_openrouter_api_key');
delete_site_option('botwriter_openrouter_api_key');
delete_option('botwriter_fal_api_key');
delete_site_option('botwriter_fal_api_key');
delete_option('botwriter_replicate_api_key');
delete_site_option('botwriter_replicate_api_key');
delete_option('botwriter_stability_api_key');
delete_site_option('botwriter_stability_api_key');
delete_option('botwriter_cloudflare_api_key');
delete_site_option('botwriter_cloudflare_api_key');
delete_option('botwriter_cloudflare_account_id');
delete_site_option('botwriter_cloudflare_account_id');
delete_option('botwriter_custom_text_model');
delete_site_option('botwriter_custom_text_model');
delete_option('botwriter_custom_text_api_key');
delete_site_option('botwriter_custom_text_api_key');
delete_option('botwriter_custom_text_timeout');
delete_site_option('botwriter_custom_text_timeout');
delete_option('botwriter_custom_image_url');
delete_site_option('botwriter_custom_image_url');
delete_option('botwriter_custom_image_type');
delete_site_option('botwriter_custom_image_type');
delete_option('botwriter_custom_image_model');
delete_site_option('botwriter_custom_image_model');
delete_option('botwriter_custom_image_timeout');
delete_site_option('botwriter_custom_image_timeout');
delete_option('botwriter_negative_prompt');
delete_site_option('botwriter_negative_prompt');
delete_option('botwriter_a1111_steps');
delete_site_option('botwriter_a1111_steps');
delete_option('botwriter_a1111_cfg_scale');
delete_site_option('botwriter_a1111_cfg_scale');
delete_option('botwriter_a1111_sampler');
delete_site_option('botwriter_a1111_sampler');
delete_option('botwriter_comfyui_workflow');
delete_site_option('botwriter_comfyui_workflow');
delete_option('botwriter_image_postprocess_enabled');
delete_site_option('botwriter_image_postprocess_enabled');
delete_option('botwriter_image_output_format');
delete_site_option('botwriter_image_output_format');
delete_option('botwriter_image_max_width');
delete_site_option('botwriter_image_max_width');
delete_option('botwriter_image_compression');
delete_site_option('botwriter_image_compression');
delete_option('botwriter_image_max_filesize');
delete_site_option('botwriter_image_max_filesize');
delete_option('botwriter_version');
delete_site_option('botwriter_version');
delete_option('botwriter_alerts');
delete_site_option('botwriter_alerts');
delete_option('botwriter_settings');
delete_site_option('botwriter_settings');
delete_option('botwriter_announcements');
delete_site_option('botwriter_announcements');
delete_option('botwriter_review_dismissed_until');
delete_site_option('botwriter_review_dismissed_until');
delete_option('botwriter_review_done');
delete_site_option('botwriter_review_done');
delete_option('botwriter_review_dismissed');
delete_site_option('botwriter_review_dismissed');
delete_option('botwriter_errors_notice_dismissed');
delete_site_option('botwriter_errors_notice_dismissed');
delete_option('botwriter_news_api_key');
delete_site_option('botwriter_news_api_key');
delete_option('botwriter_ai_image_provider');
delete_site_option('botwriter_ai_image_provider');
global $wpdb;
$options = $wpdb->get_col( $wpdb->prepare( "SELECT option_name FROM {$wpdb->options} WHERE option_name LIKE %s", 'botwriter_task_state_%' ) );
foreach ( $options as $opt ) {
	delete_option( $opt );
	delete_site_option( $opt );
}
delete_option('botwriter_seo_translation_enabled');
delete_site_option('botwriter_seo_translation_enabled');
delete_option('botwriter_seo_translate_title');
delete_site_option('botwriter_seo_translate_title');
delete_option('botwriter_seo_translate_tags');
delete_site_option('botwriter_seo_translate_tags');
delete_option('botwriter_seo_translate_image');
delete_site_option('botwriter_seo_translate_image');
delete_option('botwriter_seo_target_language');
delete_site_option('botwriter_seo_target_language');
delete_option('botwriter_anthropic_model');
delete_site_option('botwriter_anthropic_model');
delete_option('botwriter_google_model');
delete_site_option('botwriter_google_model');
delete_option('botwriter_mistral_model');
delete_site_option('botwriter_mistral_model');
delete_option('botwriter_groq_model');
delete_site_option('botwriter_groq_model');
delete_option('botwriter_openrouter_model');
delete_site_option('botwriter_openrouter_model');
delete_option('botwriter_dalle_model');
delete_site_option('botwriter_dalle_model');
delete_option('botwriter_gemini_image_model');
delete_site_option('botwriter_gemini_image_model');
delete_option('botwriter_fal_model');
delete_site_option('botwriter_fal_model');
delete_option('botwriter_replicate_model');
delete_site_option('botwriter_replicate_model');
delete_option('botwriter_stability_model');
delete_site_option('botwriter_stability_model');
delete_option('botwriter_cloudflare_model');
delete_site_option('botwriter_cloudflare_model');

// Delete Transients
delete_transient('action_scheduler_last_pastdue_actions_check');
delete_site_transient('action_scheduler_last_pastdue_actions_check');
delete_transient('action_scheduler_admin_notice');
delete_site_transient('action_scheduler_admin_notice');
delete_transient('as_comment_count');
delete_site_transient('as_comment_count');

// Clear Cron Jobs
wp_clear_scheduled_hook('botwriter_scheduled_events_plugin_cron');

// Clear Metadata
global $wpdb;
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", 'managetoplevel_page_list_tablecolumnshidden' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", 'managetoplevel_page_list_tablecolumnshidden' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", 'managetoplevel_page_list_tablecolumnshidden' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", 'managetoplevel_page_list_tablecolumnshidden' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", '_botwriter_generated' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", '_botwriter_generated' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", '_botwriter_generated' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", '_botwriter_generated' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", '_botwriter_provider' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", '_botwriter_provider' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", '_botwriter_provider' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", '_botwriter_provider' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", '_botwriter_model' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", '_botwriter_model' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", '_botwriter_model' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", '_botwriter_model' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", '_botwriter_generated_date' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", '_botwriter_generated_date' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", '_botwriter_generated_date' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", '_botwriter_generated_date' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", '_botwriter_source_link' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", '_botwriter_source_link' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", '_botwriter_source_link' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", '_botwriter_source_link' ) );

