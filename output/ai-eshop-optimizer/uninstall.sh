#!/bin/bash
# WP-CLI Uninstall Script

# Delete Options
wp option delete 'aieo_chat_floating_enabled'
wp option delete 'aieo_chat_cpt_post_type_slug'
wp option delete 'aieo_chat_cpt_taxonomy_slug'
wp option delete 'aieo_chat_enabled'
wp option delete 'aieo_chat_floating_position'
wp option delete 'aieo_chat_bot_name'
wp option delete 'aieo_chat_welcome_message'
wp option delete 'aieo_chat_input_placeholder'
wp option delete 'aieo_chat_max_results'
wp option delete 'aieo_chat_hide_images'
wp option delete 'aieo_chat_require_login'
wp option delete 'aieo_chat_show_terms'
wp option delete 'aieo_chat_category_filter_enabled'
wp option delete 'aieo_chat_blog_category_filter_enabled'
wp option delete 'aieo_chat_cpt_category_filter_enabled'
wp option delete 'aieo_chat_theme'
wp option delete 'aieo_chat_floating_mobile_position'
wp option delete 'aieo_chat_floating_custom_icon'
wp option delete 'aieo_chat_floating_welcome_bubble'
wp option delete 'aieo_chat_floating_popup_width'
wp option delete 'aieo_chat_floating_popup_height'
wp option delete 'aieo_chat_floating_button_color'
wp option delete 'aieo_chat_primary_color'
wp option delete 'aieo_chat_enabled_post_types'
wp option delete 'aieo_chat_enabled_taxonomies'
wp option delete 'aieo_chat_deduplication_mode'
wp option delete 'aieo_user_membership'
wp option delete 'aieo_subscription_expiration'
wp option delete 'aieo_auto_analytics_enabled'
wp option delete 'aieo_auto_embeddings_enabled'
wp option delete 'aieo_embedding_provider'
wp option delete 'aieo_chat_embedding_model'
wp option delete 'aieo_chat_openai_embedding_model'
wp option delete 'aieo_version'
wp option delete 'aieo_site_prefix'
wp option delete 'aieo_site_orders_table'
wp option delete 'aieo_store_orders_table'
wp option delete 'aieo_offline_orders'
wp option delete 'aieo_site_products_table'
wp option delete 'aieo_core_attribute_brands'
wp option delete 'aieo_core_attribute_size'
wp option delete 'aieo_core_attribute_color'
wp option delete 'aieo_core_attribute_need'
wp option delete 'aieo_season_days_past'
wp option delete 'aieo_analytics_eponymous_id_field'
wp option delete 'aieo_season_days_after'
wp option delete 'aieo_core_product_attributes_table'
wp option delete 'aieo_core_product_category_hierarchy_table'
wp option delete 'aieo_core_category_brand_popularity_table'
wp option delete 'aieo_core_product_vitals_table'
wp option delete 'aieo_core_variation_vitals_table'
wp option delete 'aieo_core_reciprocal_products_table'
wp option delete 'aieo_erp_store_products_table'
wp option delete 'aieo_erp_store_orders_table'
wp option delete 'aieo_erp_store_customers_table'
wp option delete 'aieo_google_user_journey_table'
wp option delete 'aieo_order_id'
wp option delete 'aieo_max_records'
wp option delete 'aieo_batch_size'
wp option delete 'aieo_batch_sleep'
wp option delete 'aieo_include_text'
wp option delete 'aieo_include_attributes'
wp option delete 'aieo_create_attributes'
wp option delete 'aieo_create_needs'
wp option delete 'aieo_create_need_suggestions'
wp option delete 'aieo_create_catalogue'
wp option delete 'aieo_create_orders'
wp option delete 'aieo_erp_consolidation'
wp option delete 'aieo_erp_merge_orders'
wp option delete 'aieo_include_unsold'
wp option delete 'aieo_include_aggregate_stats'
wp option delete 'aieo_include_aggregate_category_brand_stats'
wp option delete 'aieo_include_aggregate_cust_std_stats'
wp option delete 'aieo_include_aggregate_cust_adv_stats'
wp option delete 'aieo_create_uuids'
wp option delete 'aieo_create_export'
wp option delete 'aieo_include_full_text'
wp option delete 'aieo_include_price'
wp option delete 'aieo_variations_choice'
wp option delete 'aieo_include_eponymous'
wp option delete 'aieo_include_reciprocity'
wp option delete 'aieo_include_seasonality'
wp option delete 'aieo_include_restricted_seasonality'
wp option delete 'aieo_instore_anonymous'
wp option delete 'aieo_activate_utm_stats'
wp option delete 'aieo_google_ga4'
wp option delete 'aieo_display_upsells'
wp option delete 'aieo_display_cross_sells'
wp option delete 'aieo_display_related'
wp option delete 'aieo_display_recently_viewed_products'
wp option delete 'aieo_display_same_needs'
wp option delete 'aieo_display_categories_by_sales'
wp option delete 'aieo_category_sales_period'
wp option delete 'aieo_initial_activation_date'
wp option delete 'aieo_keep_embeddings_on_deactivation'
wp option delete 'aieo_keep_chat_history_on_deactivation'
wp option delete 'aieo_keep_session_archive_on_deactivation'
wp option delete 'aieo_keep_sessions_on_deactivation'
wp option delete 'aieo_activate_account'
wp option delete 'aieo_chat_batch_size'
wp option delete 'aieo_chat_provider'
wp option delete 'aieo_chat_model'
wp option delete 'aieo_chat_openai_chat_model'
wp option delete 'aieo_chat_anthropic_api_key'
wp option delete 'aieo_chat_voyage_api_key'
wp option delete 'aieo_chat_max_tokens'
wp option delete 'aieo_chat_temperature'
wp option delete 'aieo_chat_custom_prompt'
wp option delete 'aieo_chat_history_enabled'
wp option delete 'aieo_chat_context_device_profile'
wp option delete 'aieo_chat_context_browsing_history'
wp option delete 'aieo_chat_context_history_pages'
wp option delete 'aieo_chat_context_user_preferences'
wp option delete 'aieo_chat_rerank_enabled'
wp option delete 'aieo_chat_rerank_variations_2_10'
wp option delete 'aieo_chat_rerank_variations_10_50'
wp option delete 'aieo_chat_rerank_variations_50_plus'
wp option delete 'aieo_chat_rerank_primary_category'
wp option delete 'aieo_chat_rerank_needs'
wp option delete 'aieo_chat_rerank_accessories'
wp option delete 'aieo_chat_rerank_preferred_brands'
wp option delete 'aieo_chat_openai_api_key'
wp option delete 'aieo_ai_models_last_refresh'
wp option delete 'aieo_chat_last_trained_engine'
wp option delete 'aieo_chat_last_trained_deduplication'
wp option delete 'aieo_chat_prioritize_by_sales'
wp option delete 'aieo_chat_product_priority_metric'
wp option delete 'aieo_chat_min_posts'
wp option delete 'aieo_chat_max_posts'
wp option delete 'aieo_chat_post_threshold'
wp option delete 'aieo_chat_min_products'
wp option delete 'aieo_chat_max_products'
wp option delete 'aieo_chat_product_threshold'
wp option delete 'aieo_chat_hide_frontend_products'
wp option delete 'aieo_chat_site_identity_is'
wp option delete 'aieo_chat_site_identity_is_not'
wp option delete 'aieo_auto_analytics_frequency'
wp option delete 'aieo_auto_analytics_time'
wp option delete 'aieo_auto_embeddings_frequency'
wp option delete 'aieo_auto_embeddings_time'
wp option delete 'aieo_recommendations_display_order'
wp option delete 'aieo_session_tracking_enabled'
wp option delete 'aieo_track_scroll_depth'
wp option delete 'aieo_track_clicks'
wp option delete 'aieo_throttle_clicks'
wp option delete 'aieo_session_bypass_consent'
wp option delete 'aieo_session_archive_frequency'
wp option delete 'aieo_session_archive_hour'
wp option delete 'aieo_session_retention_days'
wp option delete 'aieo_custom_image_click_rules'
wp option delete 'aieo_core_attribute_vendor'
wp option delete 'aieo_last_export_csv'
wp option delete 'aieo_activate_remote_connection'
wp option delete 'aieo_monitor_performance'
wp option delete 'aieo_account_username'
wp option delete 'aieo_account_password'
wp option delete 'aieo_remember_auth'
wp option delete 'aieo_erp_anonymous_consolidation'
wp option delete 'aieo_erp_store_anonymous_invoice_users'
wp option delete 'aieo_erp_series_to_ignore'
wp option delete 'aieo_erp_products_to_ignore'
wp option delete 'aieo_erp_product_price_to_ignore'
wp option delete 'aieo_erp_stats_per_channel'
wp option delete 'aieo_account_table'
wp option delete 'aieo_account_report_table'
wp option delete 'aieo_jwt_debugging'
wp option delete 'aieo_auth_expiry'
wp option delete 'aieo_chat_rate_limit'
wp option delete 'woocommerce_currency_pos'
wp option delete 'aieo_chat_prioritize_top_sellers'
wp option delete 'aieo_models_last_refresh'
wp option delete 'aieo_chat_cached_categories'
wp option delete 'aieo_chat_cached_blog_categories'
wp option delete 'aieo_export_orders_message'
wp option delete 'aieo_account_message'
wp option delete 'aieo_remote_connection_message'
wp option delete 'aieo_file_deletion_message'
wp option delete 'aieo_session_tracker_version'
wp option delete 'aieo_custom_image_click_rules_js'
wp option delete 'aieo_last_upsell_export'
wp db query "DELETE FROM wp_options WHERE option_name LIKE 'aieo_upsell_import_state_store_%'"
wp option delete 'aieo_last_upsell_import'
wp option delete 'aieo_jwt_token'
wp option delete 'aieo_jwt_response'
wp option delete 'aieo_jwt_user_details'
wp option delete 'aieo_first_website_db_prefix'
wp option delete 'aieo_user_expiry'
wp option delete 'aieo_export_product_titles'
wp option delete 'aieo_export_prices'
wp option delete 'aieo_export_customer_ids'
wp option delete 'aieo_seasonal_option'
wp option delete 'aieo_vendor_taxonomy'
wp option delete 'aieo_brand_taxonomy'
wp option delete 'aieo_size_taxonomies'
wp option delete 'aieo_color_taxonomies'
wp option delete 'aieo_session_journey_retention_days'
wp option delete 'aieo_migration_status'
wp option delete 'aieo_session_tracking_require_consent'
wp option delete 'aieo_session_flush_interval'
wp option delete 'aieo_track_mouse_movement'
wp option delete 'aieo_session_tracking_default_consent'

# Delete Transients
wp transient delete 'aieo_indexes_checked'
wp transient delete 'aieo_products_updated_count'
wp transient delete 'aieo_upload_notice'
wp transient delete 'aieo_upload_error'
wp db query "DELETE FROM wp_options WHERE option_name LIKE '_transient_aieo_upsell_export_state_%' OR option_name LIKE '_site_transient_aieo_upsell_export_state_%'"
wp db query "DELETE FROM wp_options WHERE option_name LIKE '_transient_aieo_upsell_import_state_%' OR option_name LIKE '_site_transient_aieo_upsell_import_state_%'"
wp transient delete 'aieo_export_lock'
wp transient delete 'aieo_product_stats_lock'
wp transient delete 'aieo_customer_std_stats_lock'
wp transient delete 'aieo_customer_adv_stats_lock'
wp transient delete 'aieo_need_suggestions_progress'
wp transient delete 'aieo_export_settings'
wp transient delete 'aieo_export_id'
wp transient delete 'aieo_export_progress'
wp transient delete 'aieo_catalogue_total'
wp transient delete 'aieo_orders_total'
wp transient delete 'aieo_orders_hpos'
wp transient delete 'aieo_unsold_count_before'
wp transient delete 'aieo_unsold_start_time'
wp transient delete 'aieo_product_stats_total'
wp transient delete 'aieo_product_stats_start_time'
wp transient delete 'aieo_category_brand_stats_lock'
wp transient delete 'aieo_category_brand_stats_start_time'
wp transient delete 'aieo_customer_std_stats_total'
wp transient delete 'aieo_customer_std_stats_start_time'
wp transient delete 'aieo_customer_std_stats_processed'
wp transient delete 'aieo_customer_adv_stats_total'
wp transient delete 'aieo_customer_adv_stats_start_time'
wp transient delete 'aieo_customer_adv_stats_processed'
wp transient delete 'aieo_uuid_total_records'
wp transient delete 'aieo_uuid_start_time'
wp transient delete 'aieo_uuid_processed'
wp transient delete 'aieo_optimize_db_lock'
wp transient delete 'aieo_fix_collation_lock'
wp transient delete 'aieo_journey_total_sessions'

# Clear Cron Jobs
wp cron event delete 'aieo_auto_analytics_event'
wp cron event delete 'aieo_auto_embeddings_event'
wp cron event delete 'aieo_chat_cleanup_cron'
wp cron event delete 'aieo_chat_generate_single_embedding'
wp cron event delete 'aieo_monthly_model_refresh'
wp cron event delete 'aieo_cleanup_expired_recommendations'
wp cron event delete 'aieo_process_session_journeys'
wp cron event delete 'aieo_aggregate_session_metrics'
wp cron event delete 'aieo_cleanup_old_journeys'
wp cron event delete 'aieo_archive_sessions'

# Direct DB Queries (Fallback)
wp db query "DELETE FROM wp_postmeta WHERE meta_key = 'aieo_banner_dismissed'"
wp db query "DELETE FROM wp_usermeta WHERE meta_key = 'aieo_banner_dismissed'"
wp db query "DELETE FROM wp_termmeta WHERE meta_key = 'aieo_banner_dismissed'"
wp db query "DELETE FROM wp_commentmeta WHERE meta_key = 'aieo_banner_dismissed'"
wp db query "DELETE FROM wp_postmeta WHERE meta_key = 'total_sales'"
wp db query "DELETE FROM wp_usermeta WHERE meta_key = 'total_sales'"
wp db query "DELETE FROM wp_termmeta WHERE meta_key = 'total_sales'"
wp db query "DELETE FROM wp_commentmeta WHERE meta_key = 'total_sales'"
wp db query "DELETE FROM wp_postmeta WHERE meta_key = '_upsell_ids'"
wp db query "DELETE FROM wp_usermeta WHERE meta_key = '_upsell_ids'"
wp db query "DELETE FROM wp_termmeta WHERE meta_key = '_upsell_ids'"
wp db query "DELETE FROM wp_commentmeta WHERE meta_key = '_upsell_ids'"
wp db query "DELETE FROM wp_postmeta WHERE meta_key = '_crosssell_ids'"
wp db query "DELETE FROM wp_usermeta WHERE meta_key = '_crosssell_ids'"
wp db query "DELETE FROM wp_termmeta WHERE meta_key = '_crosssell_ids'"
wp db query "DELETE FROM wp_commentmeta WHERE meta_key = '_crosssell_ids'"
wp db query "DELETE FROM wp_postmeta WHERE meta_key = 'aieo_neo4j_params'"
wp db query "DELETE FROM wp_usermeta WHERE meta_key = 'aieo_neo4j_params'"
wp db query "DELETE FROM wp_termmeta WHERE meta_key = 'aieo_neo4j_params'"
wp db query "DELETE FROM wp_commentmeta WHERE meta_key = 'aieo_neo4j_params'"
