<?php

// If uninstall not called from WordPress, then exit.
if ( ! defined( 'WP_UNINSTALL_PLUGIN' ) ) {
	exit;
}

// Delete Options
delete_option('subscribe_reloaded_log');
delete_site_option('subscribe_reloaded_log');
delete_option('subscribe_reloaded_auto_clean_log_frecuency');
delete_site_option('subscribe_reloaded_auto_clean_log_frecuency');
delete_option('subscribe_reloaded_author_text');
delete_site_option('subscribe_reloaded_author_text');
delete_option('subscribe_reloaded_date_format');
delete_site_option('subscribe_reloaded_date_format');
delete_option('subscribe_reloaded_subscription_confirmed');
delete_site_option('subscribe_reloaded_subscription_confirmed');
delete_option('subscribe_reloaded_management_subject');
delete_site_option('subscribe_reloaded_management_subject');
delete_option('subscribe_reloaded_management_content');
delete_site_option('subscribe_reloaded_management_content');
delete_option('subscribe_reloaded_management_email_content');
delete_site_option('subscribe_reloaded_management_email_content');
delete_option('subscribe_reloaded_manager_page');
delete_site_option('subscribe_reloaded_manager_page');
delete_option('subscribe_reloaded_enable_html_emails');
delete_site_option('subscribe_reloaded_enable_html_emails');
delete_option('subscribe_reloaded_request_mgmt_link');
delete_site_option('subscribe_reloaded_request_mgmt_link');
delete_option('subscribe_reloaded_oneclick_text');
delete_site_option('subscribe_reloaded_oneclick_text');
delete_option('subscribe_reloaded_use_captcha');
delete_site_option('subscribe_reloaded_use_captcha');
delete_option('subscribe_reloaded_captcha_site_key');
delete_site_option('subscribe_reloaded_captcha_site_key');
delete_option('subscribe_reloaded_captcha_secret_key');
delete_site_option('subscribe_reloaded_captcha_secret_key');
delete_option('subscribe_reloaded_recaptcha_version');
delete_site_option('subscribe_reloaded_recaptcha_version');
delete_option('subscribe_reloaded_use_challenge_question');
delete_site_option('subscribe_reloaded_use_challenge_question');
delete_option('subscribe_reloaded_challenge_question');
delete_site_option('subscribe_reloaded_challenge_question');
delete_option('subscribe_reloaded_challenge_answer');
delete_site_option('subscribe_reloaded_challenge_answer');
delete_option('subscribe_reloaded_allow_subscribe_without_comment');
delete_site_option('subscribe_reloaded_allow_subscribe_without_comment');
delete_option('subscribe_reloaded_enable_admin_messages');
delete_site_option('subscribe_reloaded_enable_admin_messages');
delete_option('subscribe_reloaded_from_name');
delete_site_option('subscribe_reloaded_from_name');
delete_option('subscribe_reloaded_from_email');
delete_site_option('subscribe_reloaded_from_email');
delete_option('subscribe_reloaded_enable_double_check');
delete_site_option('subscribe_reloaded_enable_double_check');
delete_option('subscribe_reloaded_subscription_confirmed_dci');
delete_site_option('subscribe_reloaded_subscription_confirmed_dci');
delete_option('subscribe_reloaded_subscribe_without_commenting');
delete_site_option('subscribe_reloaded_subscribe_without_commenting');
delete_option('subscribe_reloaded_user_text');
delete_site_option('subscribe_reloaded_user_text');
delete_option('subscribe_reloaded_enable_advanced_subscriptions');
delete_site_option('subscribe_reloaded_enable_advanced_subscriptions');
delete_option('subscribe_reloaded_checked_by_default_value');
delete_site_option('subscribe_reloaded_checked_by_default_value');
delete_option('subscribe_reloaded_safely_uninstall');
delete_site_option('subscribe_reloaded_safely_uninstall');
delete_option('subscribe_reloaded_version');
delete_site_option('subscribe_reloaded_version');
delete_option('subscribe_reloaded_fresh_install');
delete_site_option('subscribe_reloaded_fresh_install');
delete_option('subscribe_reloaded_notify_authors');
delete_site_option('subscribe_reloaded_notify_authors');
delete_option('subscribe_reloaded_deferred_admin_notices');
delete_site_option('subscribe_reloaded_deferred_admin_notices');
delete_option('subscribe_reloaded_double_check_subject');
delete_site_option('subscribe_reloaded_double_check_subject');
delete_option('subscribe_reloaded_double_check_content');
delete_site_option('subscribe_reloaded_double_check_content');
delete_option('subscribe_reloaded_unique_key');
delete_site_option('subscribe_reloaded_unique_key');
delete_option('subscribe_reloaded_subscriber_table');
delete_site_option('subscribe_reloaded_subscriber_table');
delete_option('subscribe_reloaded_purge_days');
delete_site_option('subscribe_reloaded_purge_days');
delete_option('subscribe_reloaded_custom_header_meta');
delete_site_option('subscribe_reloaded_custom_header_meta');
delete_option('subscribe_reloaded_manager_page_enabled');
delete_site_option('subscribe_reloaded_manager_page_enabled');
delete_option('subscribe_reloaded_data_sanitized');
delete_site_option('subscribe_reloaded_data_sanitized');
delete_option('wp_comment_subscriptions_manager_page');
delete_site_option('wp_comment_subscriptions_manager_page');
delete_option('wp_comment_subscriptions_show_subscription_box');
delete_site_option('wp_comment_subscriptions_show_subscription_box');
delete_option('subscribe_reloaded_show_subscription_box');
delete_site_option('subscribe_reloaded_show_subscription_box');
delete_option('wp_comment_subscriptions_checked_by_default');
delete_site_option('wp_comment_subscriptions_checked_by_default');
delete_option('subscribe_reloaded_checked_by_default');
delete_site_option('subscribe_reloaded_checked_by_default');
delete_option('wp_comment_subscriptions_enable_advanced_subscriptions');
delete_site_option('wp_comment_subscriptions_enable_advanced_subscriptions');
delete_option('wp_comment_subscriptions_checkbox_inline_style');
delete_site_option('wp_comment_subscriptions_checkbox_inline_style');
delete_option('subscribe_reloaded_checkbox_inline_style');
delete_site_option('subscribe_reloaded_checkbox_inline_style');
delete_option('wp_comment_subscriptions_checkbox_html');
delete_site_option('wp_comment_subscriptions_checkbox_html');
delete_option('subscribe_reloaded_checkbox_html');
delete_site_option('subscribe_reloaded_checkbox_html');
delete_option('wp_comment_subscriptions_checkbox_label');
delete_site_option('wp_comment_subscriptions_checkbox_label');
delete_option('subscribe_reloaded_checkbox_label');
delete_site_option('subscribe_reloaded_checkbox_label');
delete_option('wp_comment_subscriptions_subscribed_label');
delete_site_option('wp_comment_subscriptions_subscribed_label');
delete_option('subscribe_reloaded_subscribed_label');
delete_site_option('subscribe_reloaded_subscribed_label');
delete_option('wp_comment_subscriptions_subscribed_waiting_label');
delete_site_option('wp_comment_subscriptions_subscribed_waiting_label');
delete_option('subscribe_reloaded_subscribed_waiting_label');
delete_site_option('subscribe_reloaded_subscribed_waiting_label');
delete_option('wp_comment_subscriptions_author_label');
delete_site_option('wp_comment_subscriptions_author_label');
delete_option('subscribe_reloaded_author_label');
delete_site_option('subscribe_reloaded_author_label');
delete_option('wp_comment_subscriptions_htmlify_message_links');
delete_site_option('wp_comment_subscriptions_htmlify_message_links');
delete_option('subscribe_reloaded_htmlify_message_links');
delete_site_option('subscribe_reloaded_htmlify_message_links');
delete_option('wp_comment_subscriptions_manager_page_enabled');
delete_site_option('wp_comment_subscriptions_manager_page_enabled');
delete_option('wp_comment_subscriptions_manager_page_title');
delete_site_option('wp_comment_subscriptions_manager_page_title');
delete_option('subscribe_reloaded_manager_page_title');
delete_site_option('subscribe_reloaded_manager_page_title');
delete_option('wp_comment_subscriptions_custom_header_meta');
delete_site_option('wp_comment_subscriptions_custom_header_meta');
delete_option('wp_comment_subscriptions_request_mgmt_link');
delete_site_option('wp_comment_subscriptions_request_mgmt_link');
delete_option('wp_comment_subscriptions_request_mgmt_link_thankyou');
delete_site_option('wp_comment_subscriptions_request_mgmt_link_thankyou');
delete_option('subscribe_reloaded_request_mgmt_link_thankyou');
delete_site_option('subscribe_reloaded_request_mgmt_link_thankyou');
delete_option('wp_comment_subscriptions_subscribe_without_commenting');
delete_site_option('wp_comment_subscriptions_subscribe_without_commenting');
delete_option('wp_comment_subscriptions_subscription_confirmed');
delete_site_option('wp_comment_subscriptions_subscription_confirmed');
delete_option('wp_comment_subscriptions_subscription_confirmed_dci');
delete_site_option('wp_comment_subscriptions_subscription_confirmed_dci');
delete_option('wp_comment_subscriptions_author_text');
delete_site_option('wp_comment_subscriptions_author_text');
delete_option('wp_comment_subscriptions_user_text');
delete_site_option('wp_comment_subscriptions_user_text');
delete_option('wp_comment_subscriptions_from_name');
delete_site_option('wp_comment_subscriptions_from_name');
delete_option('wp_comment_subscriptions_from_email');
delete_site_option('wp_comment_subscriptions_from_email');
delete_option('wp_comment_subscriptions_notification_subject');
delete_site_option('wp_comment_subscriptions_notification_subject');
delete_option('subscribe_reloaded_notification_subject');
delete_site_option('subscribe_reloaded_notification_subject');
delete_option('wp_comment_subscriptions_notification_content');
delete_site_option('wp_comment_subscriptions_notification_content');
delete_option('subscribe_reloaded_notification_content');
delete_site_option('subscribe_reloaded_notification_content');
delete_option('wp_comment_subscriptions_double_check_subject');
delete_site_option('wp_comment_subscriptions_double_check_subject');
delete_option('wp_comment_subscriptions_double_check_content');
delete_site_option('wp_comment_subscriptions_double_check_content');
delete_option('wp_comment_subscriptions_management_subject');
delete_site_option('wp_comment_subscriptions_management_subject');
delete_option('wp_comment_subscriptions_management_content');
delete_site_option('wp_comment_subscriptions_management_content');
delete_option('wp_comment_subscriptions_purge_days');
delete_site_option('wp_comment_subscriptions_purge_days');
delete_option('wp_comment_subscriptions_enable_double_check');
delete_site_option('wp_comment_subscriptions_enable_double_check');
delete_option('wp_comment_subscriptions_notify_authors');
delete_site_option('wp_comment_subscriptions_notify_authors');
delete_option('wp_comment_subscriptions_enable_html_emails');
delete_site_option('wp_comment_subscriptions_enable_html_emails');
delete_option('wp_comment_subscriptions_process_trackbacks');
delete_site_option('wp_comment_subscriptions_process_trackbacks');
delete_option('subscribe_reloaded_process_trackbacks');
delete_site_option('subscribe_reloaded_process_trackbacks');
delete_option('wp_comment_subscriptions_enable_admin_messages');
delete_site_option('wp_comment_subscriptions_enable_admin_messages');
delete_option('wp_comment_subscriptions_admin_subscribe');
delete_site_option('wp_comment_subscriptions_admin_subscribe');
delete_option('subscribe_reloaded_admin_subscribe');
delete_site_option('subscribe_reloaded_admin_subscribe');
delete_option('wp_comment_subscriptions_admin_bcc');
delete_site_option('wp_comment_subscriptions_admin_bcc');
delete_option('subscribe_reloaded_admin_bcc');
delete_site_option('subscribe_reloaded_admin_bcc');
delete_option('wp_comment_subscriptions_only_for_posts');
delete_site_option('wp_comment_subscriptions_only_for_posts');
delete_option('subscribe_reloaded_only_for_posts');
delete_site_option('subscribe_reloaded_only_for_posts');
delete_option('subscribe_reloaded_email_blacklist_post_types_recaptcha_migrated');
delete_site_option('subscribe_reloaded_email_blacklist_post_types_recaptcha_migrated');
delete_option('subscribe_reloaded_blacklisted_emails');
delete_site_option('subscribe_reloaded_blacklisted_emails');
delete_option('subscribe_reloaded_post_type_supports');
delete_site_option('subscribe_reloaded_post_type_supports');
delete_option('active_sitewide_plugins');
delete_site_option('active_sitewide_plugins');
delete_option('subscribe_reloaded_stcr_position');
delete_site_option('subscribe_reloaded_stcr_position');
delete_option('subscribe_reloaded_reply_to');
delete_site_option('subscribe_reloaded_reply_to');
delete_option('subscribe_reloaded_default_subscription_type');
delete_site_option('subscribe_reloaded_default_subscription_type');
delete_option('subscribe_reloaded_virtual_manager_page_enabled');
delete_site_option('subscribe_reloaded_virtual_manager_page_enabled');
delete_option('subscribe_reloaded_enable_log_data');
delete_site_option('subscribe_reloaded_enable_log_data');
delete_option('subscribe_reloaded_auto_clean_log_data');
delete_site_option('subscribe_reloaded_auto_clean_log_data');
delete_option('subscribe_reloaded_enable_font_awesome');
delete_site_option('subscribe_reloaded_enable_font_awesome');
delete_option('subscribe_reloaded_delete_options_subscriptions');
delete_site_option('subscribe_reloaded_delete_options_subscriptions');
global $wpdb;
$options = $wpdb->get_col( $wpdb->prepare( "SELECT option_name FROM {$wpdb->options} WHERE option_name LIKE %s", 'subscribe_reloaded_%' ) );
foreach ( $options as $opt ) {
	delete_option( $opt );
	delete_site_option( $opt );
}
delete_option('subscribe_reloaded_allow_request_management_link');
delete_site_option('subscribe_reloaded_allow_request_management_link');
delete_option('subscribe_reloaded_only_for_logged_in');
delete_site_option('subscribe_reloaded_only_for_logged_in');
delete_option('subscribe_reloaded_use_cookies');
delete_site_option('subscribe_reloaded_use_cookies');

// Clear Cron Jobs
wp_clear_scheduled_hook('_cron_subscribe_reloaded_system_report_file_purge');
wp_clear_scheduled_hook('_cron_log_file_purge');
wp_clear_scheduled_hook('_cron_subscribe_reloaded_purge');

// Clear Metadata
global $wpdb;
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", 'stcr_disable_subscriptions' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", 'stcr_disable_subscriptions' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", 'stcr_disable_subscriptions' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", 'stcr_disable_subscriptions' ) );

