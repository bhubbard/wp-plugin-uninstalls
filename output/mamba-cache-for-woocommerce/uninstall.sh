#!/bin/bash
# WP-CLI Uninstall Script

# Delete Options
wp option delete 'mamba_enable_page_cache'
wp option delete 'mamba_cache_stats'
wp option delete 'mamba_warmup_stats'
wp option delete 'mamba_daily_stats'
wp option delete 'mamba_enable_store_api_cache'
wp option delete 'mamba_cache_ttl'
wp option delete 'mamba_browser_ttl'
wp option delete 'mamba_store_api_browser_ttl'
wp option delete 'mamba_store_api_ttl'
wp option delete 'mamba_cache_size_limit'
wp option delete 'mamba_cdn_ttl'
wp option delete 'mamba_stale_if_error'
wp option delete 'mamba_enable_priority_warmup'
wp option delete 'mamba_stats_last_write'
wp option delete 'mamba_ns_mamba_store_api'
wp option delete 'mamba_ns_mamba_tags'
wp option delete 'mamba_ns_mamba_stats'
wp option delete 'mamba_ns_mamba_cart_fragments'
wp option delete 'mamba_welcome_shown'
wp option delete 'mamba_first_visit_done'
wp option delete 'active_sitewide_plugins'
wp option delete 'mamba_license_key'
wp option delete 'mamba_license_status'
wp option delete 'mamba_license_last_ok'
wp option delete 'mamba_license_server_url'
wp option delete 'mamba_auto_setup_done'
wp option delete 'mamba_preload_concurrency'
wp option delete 'mamba_warmup_batch_size'
wp option delete 'mamba_include_accept_language_vary'
wp option delete 'mamba_last_sale_event_check'
wp option delete 'mamba_cache_last_cleanup'
wp option delete 'mamba_do_activation_redirect'
wp option delete 'mamba_hourly_stats'
wp option delete 'mamba_stats_last_hourly'
wp option delete 'mamba_pretty_permalinks_done'
wp option delete 'mamba_cdn_actions'
wp option delete 'mamba_cdn_autoload_migrated'
wp option delete 'mamba_warmup_errors'
wp option delete 'mamba_admin_notifications'
wp option delete 'mamba_debug_mode'
wp option delete 'mamba_enable_logging'
wp option delete 'mamba_log_level'
wp option delete 'mamba_log_retention_days'
wp option delete 'mamba_savings_stats'
wp option delete 'mamba_enable_webp_conversion'
wp option delete 'mamba_webp_quality'
wp option delete 'mamba_convert_full_size'
wp option delete 'mamba_enable_image_compression'
wp option delete 'mamba_compression_quality'
wp option delete 'mamba_compression_type'
wp option delete 'mamba_compress_full_size'
wp option delete 'mamba_enable_lcp_optimization'
wp option delete 'mamba_enable_avif_conversion'
wp option delete 'mamba_avif_quality'
wp option delete 'mamba_convert_full_size_avif'
wp option delete 'mamba_add_image_dimensions'
wp option delete 'mamba_disable_wc_assets_on_non_wc'
wp option delete 'mamba_disable_order_splitter_async'
wp option delete 'mamba_simplify_price_html'
wp option delete 'mamba_enable_hover_prefetch'
wp option delete 'mamba_optimize_checkout_js'
wp option delete 'mamba_optimize_checkout_css'
wp option delete 'mamba_disable_checkout_fragments'
wp option delete 'mamba_lazy_load_payments'
wp option delete 'mamba_defer_transactional_emails'
wp option delete 'mamba_preconnect_payment_sdks'
wp option delete 'mamba_disable_woo_marketplace_suggestions'
wp option delete 'mamba_suppress_woo_helper_notices'
wp option delete 'mamba_disable_woo_payment_gateway_suggestions'
wp option delete 'mamba_remove_woo_submenus'
wp option delete 'mamba_disable_order_attribution'
wp option delete 'mamba_enable_html_minify'
wp option delete 'mamba_html_minify_mode'
wp option delete 'mamba_enable_font_preload'
wp option delete 'mamba_preload_fonts'
wp option delete 'mamba_enable_dns_prefetch'
wp option delete 'mamba_dns_prefetch_domains'
wp option delete 'mamba_dns_prefetch_auto_detect'
wp option delete 'mamba_enable_preconnect'
wp option delete 'mamba_preconnect_domains'
wp option delete 'mamba_heartbeat_frontend'
wp option delete 'mamba_heartbeat_admin'
wp option delete 'mamba_heartbeat_editor'
wp option delete 'mamba_enable_adaptive_ttl'
wp option delete 'mamba_enable_critical_css'
wp option delete 'mamba_enable_css_defer'
wp option delete 'mamba_css_defer_all'
wp option delete 'mamba_critical_css_force_include'
wp option delete 'mamba_critical_css_custom_product'
wp option delete 'mamba_critical_css_custom_shop'
wp option delete 'mamba_critical_css_custom_category'
wp option delete 'mamba_critical_css_custom_cart'
wp option delete 'mamba_critical_css_custom_checkout'
wp option delete 'mamba_critical_css_custom_account'
wp option delete 'mamba_critical_css_custom_generic'
wp option delete 'mamba_enable_js_delay'
wp option delete 'mamba_js_delay_timeout'
wp option delete 'mamba_js_delay_scripts'
wp option delete 'mamba_js_delay_exclusions'
wp option delete 'mamba_warmup_priority_mode'
wp option delete 'mamba_warmup_selective_mode'
wp option delete 'mamba_warmup_schedule_enabled'
wp option delete 'mamba_warmup_schedule_time'
wp option delete 'mamba_warmup_selected_categories'
wp option delete 'mamba_warmup_selected_products'
wp option delete 'mamba_warmup_exclusions'
wp option delete 'mamba_cdn_provider'
wp option delete 'mamba_cloudflare_zone_id'
wp option delete 'mamba_cloudflare_api_token'
wp option delete 'mamba_cloudflare_detect_apo'
wp option delete 'mamba_cloudflare_send_cache_tags'
wp option delete 'mamba_cloudflare_apo_status'
wp option delete 'mamba_cloudflare_rocket_loader_status'
wp option delete 'mamba_bunny_pull_zone_id'
wp option delete 'mamba_bunny_api_key'
wp option delete 'mamba_bunny_send_cdn_tags'
wp option delete 'mamba_bunny_use_wildcard_purges'
wp option delete 'mamba_generic_webhook_url'
wp option delete 'mamba_generic_webhook_secret'
wp option delete 'mamba_fastly_service_id'
wp option delete 'mamba_fastly_api_token'
wp option delete 'mamba_fastly_send_surrogate_keys'
wp option delete 'mamba_fastly_soft_purge'
wp option delete 'mamba_cdn_enable_rewriting'
wp option delete 'mamba_cdn_hostname'
wp option delete 'mamba_cdn_dirs'
wp option delete 'mamba_cdn_exclusions'
wp option delete 'mamba_cdn_buffer_rewriting'
wp option delete 'mamba_db_optimizer_settings'
wp option delete 'cloudflare_apo_enabled'
wp option delete 'woocommerce_default_customer_address'
wp option delete 'cloudflare_api_token'
wp option delete 'cloudflare_zone_id'
wp option delete 'cloudflare_rocket_loader'
wp option delete 'cf_api_token'
wp option delete 'cloudflare_api_key'
wp option delete 'cf_zone_id'
wp option delete 'mamba_cache_size_last_check'
wp option delete 'mamba_block_indices'
wp option delete 'woocommerce_currency'
wp db query "DELETE FROM wp_options WHERE option_name LIKE 'mamba_last_sale_event_%'"
wp option delete 'woocommerce_tax_display_shop'
wp option delete 'mamba_warmup_validation_concurrency'
wp option delete 'mamba_warmup_max_retries'
wp option delete 'mamba_warmup_error_rate_threshold'
wp option delete 'mamba_warmup_batch_delay'
wp option delete 'woocommerce_default_country'
wp db query "DELETE FROM wp_options WHERE option_name LIKE 'mamba_critical_css_custom_%'"
wp option delete 'mamba_css_defer_handles'
wp option delete 'mamba_css_defer_excluded'
wp option delete 'woocommerce_hold_stock_minutes'
wp option delete 'mamba_nginx_last_webp'
wp option delete 'mamba_nginx_last_avif'
wp option delete 'fs_debug_mode'
wp option delete '_transient_timeout_fs_snooze_period'
wp option delete '_site_transient_timeout_fs_snooze_period'
wp option delete 'fs_storage_logger'
wp option delete 'fs_active_plugins'

# Delete Transients
wp transient delete 'mamba_license_check_lock'
wp transient delete 'mamba_activation_redirect'
wp db query "DELETE FROM wp_options WHERE option_name LIKE '_transient_mamba_license_cache_%' OR option_name LIKE '_site_transient_mamba_license_cache_%'"
wp transient delete 'mamba_warmup_lock'
wp transient delete 'mamba_stats_flush_lock'
wp transient delete 'mamba_cache_counts_cache'
wp db query "DELETE FROM wp_options WHERE option_name LIKE '_transient_mamba_mc_ver_%' OR option_name LIKE '_site_transient_mamba_mc_ver_%'"
wp transient delete 'mamba_sched_mamba_cache_preload'
wp transient delete 'mamba_sched_mamba_background_warmup'
wp transient delete 'fs_snooze_period'
wp transient delete 'update_plugins'
wp transient delete '_fs_api_connection_retry_counter'
wp transient delete 'update_themes'

# Clear Cron Jobs
wp cron event delete 'mamba_cache_cleanup'
wp cron event delete 'mamba_cache_preload'
wp cron event delete 'mamba_scheduled_warmup'
wp cron event delete 'mamba_license_daily_validation'
wp cron event delete 'mamba_cleanup_logs'
wp cron event delete 'mamba_stats_flush'
wp cron event delete 'mamba_warmup_job'
wp cron event delete 'mamba_background_warmup'
wp cron event delete 'mamba_priority_warmup'
wp cron event delete 'mamba_cache_size_check'
wp cron event delete 'mamba_check_sale_boundaries'
wp cron event delete 'mamba_block_cache_cleanup'
wp cron event delete 'mamba_deferred_wc_variation_clear'
wp cron event delete 'mamba_product_sale_event'
wp cron event delete 'fs_debug_turn_off_logging_hook'

# Direct DB Queries (Fallback)
wp db query "DELETE FROM wp_postmeta WHERE meta_key = '_mamba_webp_conversion'"
wp db query "DELETE FROM wp_usermeta WHERE meta_key = '_mamba_webp_conversion'"
wp db query "DELETE FROM wp_termmeta WHERE meta_key = '_mamba_webp_conversion'"
wp db query "DELETE FROM wp_commentmeta WHERE meta_key = '_mamba_webp_conversion'"
wp db query "DELETE FROM wp_postmeta WHERE meta_key = '_mamba_compression_quality'"
wp db query "DELETE FROM wp_usermeta WHERE meta_key = '_mamba_compression_quality'"
wp db query "DELETE FROM wp_termmeta WHERE meta_key = '_mamba_compression_quality'"
wp db query "DELETE FROM wp_commentmeta WHERE meta_key = '_mamba_compression_quality'"
wp db query "DELETE FROM wp_postmeta WHERE meta_key = '_mamba_avif_conversion'"
wp db query "DELETE FROM wp_usermeta WHERE meta_key = '_mamba_avif_conversion'"
wp db query "DELETE FROM wp_termmeta WHERE meta_key = '_mamba_avif_conversion'"
wp db query "DELETE FROM wp_commentmeta WHERE meta_key = '_mamba_avif_conversion'"
wp db query "DELETE FROM wp_postmeta WHERE meta_key = '_mamba_last_significant_change'"
wp db query "DELETE FROM wp_usermeta WHERE meta_key = '_mamba_last_significant_change'"
wp db query "DELETE FROM wp_termmeta WHERE meta_key = '_mamba_last_significant_change'"
wp db query "DELETE FROM wp_commentmeta WHERE meta_key = '_mamba_last_significant_change'"
wp db query "DELETE FROM wp_postmeta WHERE meta_key = 'thumbnail_id'"
wp db query "DELETE FROM wp_usermeta WHERE meta_key = 'thumbnail_id'"
wp db query "DELETE FROM wp_termmeta WHERE meta_key = 'thumbnail_id'"
wp db query "DELETE FROM wp_commentmeta WHERE meta_key = 'thumbnail_id'"
