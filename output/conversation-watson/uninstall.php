<?php

// If uninstall not called from WordPress, then exit.
if ( ! defined( 'WP_UNINSTALL_PLUGIN' ) ) {
	exit;
}

// Delete Options
delete_option('watsonconv_credentials');
delete_site_option('watsonconv_credentials');
delete_option('watsonconv_twilio');
delete_site_option('watsonconv_twilio');
delete_option('watsonconv_twiml_sid');
delete_site_option('watsonconv_twiml_sid');
delete_option('watsonconv_call_id');
delete_site_option('watsonconv_call_id');
delete_option('watsonconv_call_recipient');
delete_site_option('watsonconv_call_recipient');
delete_option('watsonconv_total_requests');
delete_site_option('watsonconv_total_requests');
delete_option('watsonconv_use_limit');
delete_site_option('watsonconv_use_limit');
delete_option('watsonconv_limit');
delete_site_option('watsonconv_limit');
delete_option('watsonconv_limit_message');
delete_site_option('watsonconv_limit_message');
delete_option('watsonconv_use_client_limit');
delete_site_option('watsonconv_use_client_limit');
delete_option('watsonconv_client_limit');
delete_site_option('watsonconv_client_limit');
delete_option('watsonconv_client_limit_message');
delete_site_option('watsonconv_client_limit_message');
delete_option('watsonconv_history_enabled');
delete_site_option('watsonconv_history_enabled');
delete_option('watsonconv_history_debug_enabled');
delete_site_option('watsonconv_history_debug_enabled');
delete_option('watsonconv_mail_vars_enabled');
delete_site_option('watsonconv_mail_vars_enabled');
delete_option('watsonconv_client_list');
delete_site_option('watsonconv_client_list');
delete_option('watsonconv_interval');
delete_site_option('watsonconv_interval');
delete_option('watsonconv_client_interval');
delete_site_option('watsonconv_client_interval');
delete_option('watsonconv_mail_vars_email_address_to');
delete_site_option('watsonconv_mail_vars_email_address_to');
delete_option('watsonconv_smtp_setting_enabled');
delete_site_option('watsonconv_smtp_setting_enabled');
delete_option('watsonconv_mail_vars_smtp_host');
delete_site_option('watsonconv_mail_vars_smtp_host');
delete_option('watsonconv_mail_vars_smtp_authentication');
delete_site_option('watsonconv_mail_vars_smtp_authentication');
delete_option('watsonconv_mail_vars_smtp_port');
delete_site_option('watsonconv_mail_vars_smtp_port');
delete_option('watsonconv_mail_vars_smtp_secure');
delete_site_option('watsonconv_mail_vars_smtp_secure');
delete_option('watsonconv_mail_vars_smtp_username');
delete_site_option('watsonconv_mail_vars_smtp_username');
delete_option('watsonconv_mail_vars_smtp_password');
delete_site_option('watsonconv_mail_vars_smtp_password');
delete_option('watsonconv_last_cron_check');
delete_site_option('watsonconv_last_cron_check');
delete_option('watsonconv_cron_was_reliable');
delete_site_option('watsonconv_cron_was_reliable');
delete_option('watsonconv_runner_state');
delete_site_option('watsonconv_runner_state');
delete_option('watsonconv_runner_launched');
delete_site_option('watsonconv_runner_launched');
delete_option('watsonconv_fallback_state');
delete_site_option('watsonconv_fallback_state');
delete_option('watsonconv_fallback_time');
delete_site_option('watsonconv_fallback_time');
delete_option('watsonconv_notification_enabled');
delete_site_option('watsonconv_notification_enabled');
delete_option('watsonconv_notification_summary_prev_ts');
delete_site_option('watsonconv_notification_summary_prev_ts');
delete_option('watsonconv_notification_summary_interval');
delete_site_option('watsonconv_notification_summary_interval');
delete_option('watsonconv_notification_email_to');
delete_site_option('watsonconv_notification_email_to');
delete_option('watsonconv_font_size');
delete_site_option('watsonconv_font_size');
delete_option('watsonconv_font_size_fs');
delete_site_option('watsonconv_font_size_fs');
delete_option('watsonconv_fab_text_size');
delete_site_option('watsonconv_fab_text_size');
delete_option('watsonconv_fab_icon_size');
delete_site_option('watsonconv_fab_icon_size');
delete_option('watsonconv_color');
delete_site_option('watsonconv_color');
delete_option('watsonconv_size');
delete_site_option('watsonconv_size');
delete_option('watsonconv_position');
delete_site_option('watsonconv_position');
delete_option('watsonconv_logo');
delete_site_option('watsonconv_logo');
delete_option('watsonconv_full_screen');
delete_site_option('watsonconv_full_screen');
delete_option('watsonconv_css_cache');
delete_site_option('watsonconv_css_cache');
delete_option('watsonconv_custom_logo');
delete_site_option('watsonconv_custom_logo');
delete_option('watsonconv_fname_var');
delete_site_option('watsonconv_fname_var');
delete_option('watsonconv_lname_var');
delete_site_option('watsonconv_lname_var');
delete_option('watsonconv_nname_var');
delete_site_option('watsonconv_nname_var');
delete_option('watsonconv_email_var');
delete_site_option('watsonconv_email_var');
delete_option('watsonconv_login_var');
delete_site_option('watsonconv_login_var');
delete_option('watsonconv_plugin_version_var');
delete_site_option('watsonconv_plugin_version_var');
delete_option('watsonconv_typing_delay_from_plugin');
delete_site_option('watsonconv_typing_delay_from_plugin');
delete_option('watsonconv_delay');
delete_site_option('watsonconv_delay');
delete_option('watsonconv_minimized');
delete_site_option('watsonconv_minimized');
delete_option('watsonconv_title');
delete_site_option('watsonconv_title');
delete_option('watsonconv_clear_text');
delete_site_option('watsonconv_clear_text');
delete_option('watsonconv_message_prompt');
delete_site_option('watsonconv_message_prompt');
delete_option('watsonconv_send_btn');
delete_site_option('watsonconv_send_btn');
delete_option('watsonconv_fab_icon_pos');
delete_site_option('watsonconv_fab_icon_pos');
delete_option('watsonconv_fab_text');
delete_site_option('watsonconv_fab_text');
delete_option('watsonconv_use_twilio');
delete_site_option('watsonconv_use_twilio');
delete_option('watsonconv_call_tooltip');
delete_site_option('watsonconv_call_tooltip');
delete_option('watsonconv_call_button');
delete_site_option('watsonconv_call_button');
delete_option('watsonconv_calling_text');
delete_site_option('watsonconv_calling_text');
delete_option('watsonconv_message_after_error');
delete_site_option('watsonconv_message_after_error');
delete_option('watsonconv_clear_chat');
delete_site_option('watsonconv_clear_chat');
delete_option('watsonconv_show_on');
delete_site_option('watsonconv_show_on');
delete_option('watsonconv_home_page');
delete_site_option('watsonconv_home_page');
delete_option('watsonconv_pages');
delete_site_option('watsonconv_pages');
delete_option('watsonconv_posts');
delete_site_option('watsonconv_posts');
delete_option('watsonconv_categories');
delete_site_option('watsonconv_categories');
delete_option('watsonconv_last_applied_update');
delete_site_option('watsonconv_last_applied_update');
delete_option('watsonconv_logger_initialized');
delete_site_option('watsonconv_logger_initialized');
delete_option('watsonconv_log_fetch_ts');
delete_site_option('watsonconv_log_fetch_ts');
delete_option('watsonconv_log_fetch_event');
delete_site_option('watsonconv_log_fetch_event');
delete_option('watsonconv_history_limit');
delete_site_option('watsonconv_history_limit');
delete_option('watsonconv_notification_send_test');
delete_site_option('watsonconv_notification_send_test');
delete_option('watsonconv_history_limit_enabled');
delete_site_option('watsonconv_history_limit_enabled');
delete_option('watsonconv_cleanup_offset');
delete_site_option('watsonconv_cleanup_offset');

// Delete Transients
delete_transient('watsonconv_total_requests');
delete_site_transient('watsonconv_total_requests');
delete_transient('watsonconv_client_list');
delete_site_transient('watsonconv_client_list');
global $wpdb;
$transients = $wpdb->get_col( $wpdb->prepare( "SELECT option_name FROM {$wpdb->options} WHERE option_name LIKE %s OR option_name LIKE %s", '_transient_%_process_lock', '_site_transient_%_process_lock' ) );
foreach ( $transients as $transient ) {
	delete_option( $transient );
}

// Clear Cron Jobs
wp_clear_scheduled_hook('watson_save_to_disk');
wp_clear_scheduled_hook('watson_reset_total_usage');
wp_clear_scheduled_hook('watson_reset_client_usage');

// Clear Metadata
global $wpdb;
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", 'first_name' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", 'first_name' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", 'first_name' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", 'first_name' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", 'last_name' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", 'last_name' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", 'last_name' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", 'last_name' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", 'nickname' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", 'nickname' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", 'nickname' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", 'nickname' ) );

