<?php

// If uninstall not called from WordPress, then exit.
if ( ! defined( 'WP_UNINSTALL_PLUGIN' ) ) {
	exit;
}

// Delete Options
delete_option('mainwp_child_connected_admin');
delete_site_option('mainwp_child_connected_admin');
delete_option('mainwp_child_pubkey');
delete_site_option('mainwp_child_pubkey');
delete_option('mainwp_child_actions_saved_data');
delete_site_option('mainwp_child_actions_saved_data');
delete_option('mainwp_child_actions_data_checked');
delete_site_option('mainwp_child_actions_data_checked');
delete_option('mainwp_child_actions_saved_number_of_days');
delete_site_option('mainwp_child_actions_saved_number_of_days');
delete_option('wp_mainwp_child_actions_plugins_to_delete');
delete_site_option('wp_mainwp_child_actions_plugins_to_delete');
delete_option('mainwp_child_ignored_nonmainwp_actions');
delete_site_option('mainwp_child_ignored_nonmainwp_actions');
delete_option('mainwp_backupbuddy_hide_plugin');
delete_site_option('mainwp_backupbuddy_hide_plugin');
delete_option('_transient_doing_cron');
delete_site_option('_transient_doing_cron');
delete_option('mainwp_backupwordpress_hide_plugin');
delete_site_option('mainwp_backupwordpress_hide_plugin');
global $wpdb;
$options = $wpdb->get_col( $wpdb->prepare( "SELECT option_name FROM {$wpdb->options} WHERE option_name LIKE %s", 'hmbkp_schedule_%' ) );
foreach ( $options as $opt ) {
	delete_option( $opt );
	delete_site_option( $opt );
}
delete_option('mainwp_backwpup_hide_plugin');
delete_site_option('mainwp_backwpup_hide_plugin');
delete_option('backwpup_cfg_logfolder');
delete_site_option('backwpup_cfg_logfolder');
delete_option('backwpup_messages');
delete_site_option('backwpup_messages');
global $wpdb;
$options = $wpdb->get_col( $wpdb->prepare( "SELECT option_name FROM {$wpdb->options} WHERE option_name LIKE %s", 'backwpup_cfg_%' ) );
foreach ( $options as $opt ) {
	delete_option( $opt );
	delete_site_option( $opt );
}
delete_option('license_status');
delete_site_option('license_status');
delete_option('license_instance_key');
delete_site_option('license_instance_key');
delete_option('license_api_key');
delete_site_option('license_api_key');
delete_option('license_product_id');
delete_site_option('license_product_id');
delete_option('backwpup_onboarding');
delete_site_option('backwpup_onboarding');
delete_option('backwpup_global_job_id');
delete_site_option('backwpup_global_job_id');
delete_option('backwpup_backup_files_job_id');
delete_site_option('backwpup_backup_files_job_id');
delete_option('backwpup_backup_database_job_id');
delete_site_option('backwpup_backup_database_job_id');
delete_option('mainwp_child_branding_settings');
delete_site_option('mainwp_child_branding_settings');
delete_option('mainwp_child_auto_purge_cache');
delete_site_option('mainwp_child_auto_purge_cache');
delete_option('mainwp_child_cloud_flair_enabled');
delete_site_option('mainwp_child_cloud_flair_enabled');
delete_option('mainwp_cloudflair_email');
delete_site_option('mainwp_cloudflair_email');
delete_option('mainwp_child_cloudflair_key');
delete_site_option('mainwp_child_cloudflair_key');
delete_option('mainwp_cloudflair_key');
delete_site_option('mainwp_cloudflair_key');
delete_option('mainwp_child_cloudflare_use_token');
delete_site_option('mainwp_child_cloudflare_use_token');
delete_option('mainwp_child_cloudflare_token');
delete_site_option('mainwp_child_cloudflare_token');
delete_option('mainwp_cache_control_last_purged');
delete_site_option('mainwp_cache_control_last_purged');
delete_option('mainwp_cache_control_cache_solution');
delete_site_option('mainwp_cache_control_cache_solution');
delete_option('mainwp_cache_control_log');
delete_site_option('mainwp_cache_control_log');
delete_option('site_url');
delete_site_option('site_url');
delete_option('woocommerce_db_version');
delete_site_option('woocommerce_db_version');
delete_option('html-regression-track-admin-assets');
delete_site_option('html-regression-track-admin-assets');
delete_option('mainwp_ithemes_hide_plugin');
delete_site_option('mainwp_ithemes_hide_plugin');
delete_option('itsec_active_modules');
delete_site_option('itsec_active_modules');
delete_option('mainwp_child_itsec_defaults_applied');
delete_site_option('mainwp_child_itsec_defaults_applied');
delete_option('itsec_temp_whitelist_ip');
delete_site_option('itsec_temp_whitelist_ip');
delete_option('itsec_ipcheck');
delete_site_option('itsec_ipcheck');
delete_option('mainwp_child_jetpack_protect_hide_plugin');
delete_site_option('mainwp_child_jetpack_protect_hide_plugin');
delete_option('mainwp_child_jetpack_scan_hide_plugin');
delete_site_option('mainwp_child_jetpack_scan_hide_plugin');
delete_option('mainwp_linkschecker_ext_enabled');
delete_site_option('mainwp_linkschecker_ext_enabled');
delete_option('mainwp_linkschecker_hide_plugin');
delete_site_option('mainwp_linkschecker_hide_plugin');
delete_option('wsblc_options');
delete_site_option('wsblc_options');
delete_option('mainwp_maintenance_opt_alert_404');
delete_site_option('mainwp_maintenance_opt_alert_404');
delete_option('mainwp_maintenance_opt_alert_404_email');
delete_site_option('mainwp_maintenance_opt_alert_404_email');
delete_option('mainwp_security');
delete_site_option('mainwp_security');
delete_option('mainwp_ext_code_snippets');
delete_site_option('mainwp_ext_code_snippets');
delete_option('mainwp_pagespeed_hide_plugin');
delete_site_option('mainwp_pagespeed_hide_plugin');
delete_option('mainwp_child_pagespeed_count_checking');
delete_site_option('mainwp_child_pagespeed_count_checking');
delete_option('gpagespeedi_options');
delete_site_option('gpagespeedi_options');
delete_option('mainwp_pw_max_age_days');
delete_site_option('mainwp_pw_max_age_days');
delete_option('mainwp_pw_due_soon_days');
delete_site_option('mainwp_pw_due_soon_days');
delete_option('mainwp_pw_due_soon_message');
delete_site_option('mainwp_pw_due_soon_message');
delete_option('mainwp_pw_overdue_message');
delete_site_option('mainwp_pw_overdue_message');
delete_option('mainwp_pw_show_notices_to');
delete_site_option('mainwp_pw_show_notices_to');
delete_option('mainwp_pw_policy_enabled_at');
delete_site_option('mainwp_pw_policy_enabled_at');
delete_option('mainwp_child_plugintheme_days_outdate');
delete_site_option('mainwp_child_plugintheme_days_outdate');
delete_option('mainwp_child_plugin_version');
delete_site_option('mainwp_child_plugin_version');
delete_option('mainwp_wp_staging_ext_enabled');
delete_site_option('mainwp_wp_staging_ext_enabled');
delete_option('mainwp_wp_staging_hide_plugin');
delete_site_option('mainwp_wp_staging_hide_plugin');
delete_option('wpstg_settings');
delete_site_option('wpstg_settings');
delete_option('wpstg_existing_clones_beta');
delete_site_option('wpstg_existing_clones_beta');
delete_option('mainwp_child_auth');
delete_site_option('mainwp_child_auth');
delete_option('mainwp_child_ignored_changes_logs');
delete_site_option('mainwp_child_ignored_changes_logs');
delete_option('mainwp_child_pingnonce');
delete_site_option('mainwp_child_pingnonce');
delete_option('mainwp_child_settings_sync_data');
delete_site_option('mainwp_child_settings_sync_data');
delete_option('mainwp_child_sync_users_number');
delete_site_option('mainwp_child_sync_users_number');
delete_option('mainwp_child_recent_number');
delete_site_option('mainwp_child_recent_number');
delete_option('mainwp_child_pluginDir');
delete_site_option('mainwp_child_pluginDir');
delete_option('mainwp_time_capsule_ext_enabled');
delete_site_option('mainwp_time_capsule_ext_enabled');
delete_option('mainwp_time_capsule_hide_plugin');
delete_site_option('mainwp_time_capsule_hide_plugin');
delete_option('mainwp_premium_updates');
delete_site_option('mainwp_premium_updates');
delete_option('updraft_oneshotnonce');
delete_site_option('updraft_oneshotnonce');
delete_option('cron');
delete_site_option('cron');
delete_option('mainwp_updraftplus_hide_plugin');
delete_site_option('mainwp_updraftplus_hide_plugin');
delete_option('mainwp_child_wpvulndb_token');
delete_site_option('mainwp_child_wpvulndb_token');
delete_option('mainwp_child_vuln_nvd_checking_list');
delete_site_option('mainwp_child_vuln_nvd_checking_list');
delete_option('woocommerce_notify_low_stock_amount');
delete_site_option('woocommerce_notify_low_stock_amount');
delete_option('woocommerce_notify_no_stock_amount');
delete_site_option('woocommerce_notify_no_stock_amount');
delete_option('mainwp_wordfence_hide_plugin');
delete_site_option('mainwp_wordfence_hide_plugin');
delete_option('mainwp_wordfence_lastcheck_scan');
delete_site_option('mainwp_wordfence_lastcheck_scan');
delete_option('mainwp_child_wordfence_cron_time');
delete_site_option('mainwp_child_wordfence_cron_time');
delete_option('wordfence_syncAttackDataAttempts');
delete_site_option('wordfence_syncAttackDataAttempts');
delete_option('mainwp_wprocket_hide_plugin');
delete_site_option('mainwp_wprocket_hide_plugin');
delete_option('_transient_wpr_dynamic_lists_delayjs');
delete_site_option('_transient_wpr_dynamic_lists_delayjs');
delete_option('active_sitewide_plugins');
delete_site_option('active_sitewide_plugins');
delete_option('mainwp_child_update_version');
delete_site_option('mainwp_child_update_version');
delete_option('mainwp_child_subpages ');
delete_site_option('mainwp_child_subpages ');
delete_option('mainwp_child_ttl_active_unconnected_site');
delete_site_option('mainwp_child_ttl_active_unconnected_site');
delete_option('mainwp_child_lasttime_not_connected');
delete_site_option('mainwp_child_lasttime_not_connected');
delete_option('mainwp_creport_first_time_activated');
delete_site_option('mainwp_creport_first_time_activated');
delete_option('mainwp_child_nonce');
delete_site_option('mainwp_child_nonce');
delete_option('mainwp_child_clone_sites');
delete_site_option('mainwp_child_clone_sites');
delete_option('mainwp_temp_clone_admin');
delete_site_option('mainwp_temp_clone_admin');
delete_option('mainwp_child_clone_from_server_last_folder');
delete_site_option('mainwp_child_clone_from_server_last_folder');
delete_option('mainwp_child_restore_permalink');
delete_site_option('mainwp_child_restore_permalink');
delete_option('mainwp_ajaxposts');
delete_site_option('mainwp_ajaxposts');
delete_option('mainwp_child_clone_permalink');
delete_site_option('mainwp_child_clone_permalink');
delete_option('mainwp_temp_clone_plugins');
delete_site_option('mainwp_temp_clone_plugins');
delete_option('mainwp_temp_clone_themes');
delete_site_option('mainwp_temp_clone_themes');
delete_option('mainwp_child_just_clone_admin');
delete_site_option('mainwp_child_just_clone_admin');
delete_option('mainwp_child_openssl_sign_algo');
delete_site_option('mainwp_child_openssl_sign_algo');
delete_option('mainwp_child_recent_custom_cpt_ids_limit');
delete_site_option('mainwp_child_recent_custom_cpt_ids_limit');
delete_option('mainwp_child_uniqueId');
delete_site_option('mainwp_child_uniqueId');
delete_option('pressable_site_id');
delete_site_option('pressable_site_id');
delete_option('mainwp_ext_snippets_enabled');
delete_site_option('mainwp_ext_snippets_enabled');
global $wpdb;
$options = $wpdb->get_col( $wpdb->prepare( "SELECT option_name FROM {$wpdb->options} WHERE option_name LIKE %s", 'mainwp_lasttime_backup_%' ) );
foreach ( $options as $opt ) {
	delete_option( $opt );
	delete_site_option( $opt );
}
delete_option('classic-editor-replace');
delete_site_option('classic-editor-replace');
delete_option('classic-editor-allow-users');
delete_site_option('classic-editor-allow-users');
delete_option('nav_menu_options');
delete_site_option('nav_menu_options');
delete_option('sidebars_widgets');
delete_site_option('sidebars_widgets');
global $wpdb;
$options = $wpdb->get_col( $wpdb->prepare( "SELECT option_name FROM {$wpdb->options} WHERE option_name LIKE %s", 'widget_%' ) );
foreach ( $options as $opt ) {
	delete_option( $opt );
	delete_site_option( $opt );
}

// Delete Transients
global $wpdb;
$transients = $wpdb->get_col( $wpdb->prepare( "SELECT option_name FROM {$wpdb->options} WHERE option_name LIKE %s OR option_name LIKE %s", '_transient_pb_backupbuddy_stop_backup-%', '_site_transient_pb_backupbuddy_stop_backup-%' ) );
foreach ( $transients as $transient ) {
	delete_option( $transient );
}
delete_transient('pb_backupbuddy_malwarescan');
delete_site_transient('pb_backupbuddy_malwarescan');
delete_transient('backupbuddy_live_jump');
delete_site_transient('backupbuddy_live_jump');
delete_transient('hmbkp_schedules');
delete_site_transient('hmbkp_schedules');
delete_transient('backwpup_cookies');
delete_site_transient('backwpup_cookies');
global $wpdb;
$transients = $wpdb->get_col( $wpdb->prepare( "SELECT option_name FROM {$wpdb->options} WHERE option_name LIKE %s OR option_name LIKE %s", '_transient_mainwp_old_password_hash_%', '_site_transient_mainwp_old_password_hash_%' ) );
foreach ( $transients as $transient ) {
	delete_option( $transient );
}
delete_transient('mainwp_update_themes_cached');
delete_site_transient('mainwp_update_themes_cached');
delete_transient('mainwp_update_plugins_cached');
delete_site_transient('mainwp_update_plugins_cached');
delete_transient('mainwp_child_total_size');
delete_site_transient('mainwp_child_total_size');
delete_transient('health-check-site-status-result');
delete_site_transient('health-check-site-status-result');
delete_transient('update_themes');
delete_site_transient('update_themes');
delete_transient('update_plugins');
delete_site_transient('update_plugins');
delete_transient('updraftvault_quota_text');
delete_site_transient('updraftvault_quota_text');
delete_transient('udvault_last_config');
delete_site_transient('udvault_last_config');
global $wpdb;
$transients = $wpdb->get_col( $wpdb->prepare( "SELECT option_name FROM {$wpdb->options} WHERE option_name LIKE %s OR option_name LIKE %s", '_transient_udaddons_connect_%', '_site_transient_udaddons_connect_%' ) );
foreach ( $transients as $transient ) {
	delete_option( $transient );
}
delete_transient('mainwp_child_trans_wpvulndb_tk');
delete_site_transient('mainwp_child_trans_wpvulndb_tk');
delete_transient('mainwp_child_trans_nvd_nist_tk');
delete_site_transient('mainwp_child_trans_nvd_nist_tk');
global $wpdb;
$transients = $wpdb->get_col( $wpdb->prepare( "SELECT option_name FROM {$wpdb->options} WHERE option_name LIKE %s OR option_name LIKE %s", '_transient_mainwp_vulnche_trans_plug_%', '_site_transient_mainwp_vulnche_trans_plug_%' ) );
foreach ( $transients as $transient ) {
	delete_option( $transient );
}
delete_transient('mainwp_vulnche_trans_wp_json');
delete_site_transient('mainwp_vulnche_trans_wp_json');
global $wpdb;
$transients = $wpdb->get_col( $wpdb->prepare( "SELECT option_name FROM {$wpdb->options} WHERE option_name LIKE %s OR option_name LIKE %s", '_transient_mainwp_vulnche_trans_theme_%', '_site_transient_mainwp_vulnche_trans_theme_%' ) );
foreach ( $transients as $transient ) {
	delete_option( $transient );
}
delete_transient('wpr_dynamic_lists_delayjs');
delete_site_transient('wpr_dynamic_lists_delayjs');
delete_transient('rocket_clear_cache');
delete_site_transient('rocket_clear_cache');
delete_transient('rocket_preload_errors');
delete_site_transient('rocket_preload_errors');
delete_transient('rocket_performance_hints_clear_message');
delete_site_transient('rocket_performance_hints_clear_message');
global $wpdb;
$transients = $wpdb->get_col( $wpdb->prepare( "SELECT option_name FROM {$wpdb->options} WHERE option_name LIKE %s OR option_name LIKE %s", '_transient_clone-full-backup-%', '_site_transient_clone-full-backup-%' ) );
foreach ( $transients as $transient ) {
	delete_option( $transient );
}

// Clear Cron Jobs
wp_clear_scheduled_hook('backupbuddy_cron');
wp_clear_scheduled_hook('backwpup_cron');
wp_clear_scheduled_hook('mainwp_child_pagespeed_cron_check');
wp_clear_scheduled_hook('googlepagespeedinsightschecknow');
wp_clear_scheduled_hook('updraft_backup');
wp_clear_scheduled_hook('updraft_backup_database');
wp_clear_scheduled_hook('updraft_backup_resume');
wp_clear_scheduled_hook('mainwp_child_cron_plugin_vuln_nvd_continue_force_check');
wp_clear_scheduled_hook('mainwp_child_cron_plugin_vuln_nvd_continue_check');
wp_clear_scheduled_hook('mainwp_child_wordfence_cron_scan');
wp_clear_scheduled_hook('rocket_update_dynamic_lists');

// Clear Metadata
global $wpdb;
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", 'first_name' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", 'first_name' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", 'first_name' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", 'first_name' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", 'last_name' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", 'last_name' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", 'last_name' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", 'last_name' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key LIKE %s", '%_notice' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key LIKE %s", '%_notice' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key LIKE %s", '%_notice' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key LIKE %s", '%_notice' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", 'mainwp_last_password_change' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", 'mainwp_last_password_change' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", 'mainwp_last_password_change' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", 'mainwp_last_password_change' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", '_wp_attachment_image_alt' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", '_wp_attachment_image_alt' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", '_wp_attachment_image_alt' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", '_wp_attachment_image_alt' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", '_edit_lock' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", '_edit_lock' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", '_edit_lock' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", '_edit_lock' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key LIKE %s", '%opengraph-image' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key LIKE %s", '%opengraph-image' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key LIKE %s", '%opengraph-image' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key LIKE %s", '%opengraph-image' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key LIKE %s", '%opengraph-image-id' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key LIKE %s", '%opengraph-image-id' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key LIKE %s", '%opengraph-image-id' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key LIKE %s", '%opengraph-image-id' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", '_thumbnail_id' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", '_thumbnail_id' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", '_thumbnail_id' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", '_thumbnail_id' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", 'rocket_boxes' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", 'rocket_boxes' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", 'rocket_boxes' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", 'rocket_boxes' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", '_application_passwords' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", '_application_passwords' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", '_application_passwords' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", '_application_passwords' ) );

