#!/bin/bash
# WP-CLI Uninstall Script

# Delete Options
wp option delete 'mo_ldap_local_enable_login'
wp option delete 'mo_ldap_local_enable_ldap_add'
wp option delete 'mo_ldap_local_current_plugin_version'
wp option delete 'mo_ldap_local_username_attribute'
wp option delete 'custom_ldap_username_attribute'
wp option delete 'mo_ldap_directory_server_value'
wp option delete 'mo_ldap_local_search_filter'
wp option delete 'mo_ldap_local_customer_token'
wp option delete 'mo_ldap_local_email_attribute'
wp option delete 'mo_ldap_local_register_user'
wp option delete 'mo_ldap_local_admin_email'
wp option delete 'mo_ldap_local_host_name'
wp option delete 'mo_ldap_local_admin_phone'
wp option delete 'mo_ldap_local_admin_customer_key'
wp option delete 'mo_ldap_local_admin_api_key'
wp option delete 'mo_ldap_local_message'
wp option delete 'en_save_config'
wp option delete 'mo_ldap_local_service_account_status'
wp option delete 'mo_ldap_local_user_mapping_status'
wp option delete 'mo_ldap_local_multisite_message'
wp option delete 'mo_ldap_local_verify_customer'
wp option delete 'mo_ldap_local_new_registration'
wp option delete 'mo_ldap_local_search_base'
wp option delete 'mo_ldap_local_server_dn'
wp option delete 'mo_ldap_local_server_password'
wp option delete 'Filter_search'
wp option delete 'mo_ldap_local_use_tls'
wp option delete 'mo_ldap_local_server_url_status'
wp option delete 'mo_ldap_local_server_url'
wp option delete 'mo_ldap_local_username_status'
wp option delete 'mo_ldap_local_password_status'
wp option delete 'mo_ldap_local_wp_to_ldap_search_base'
wp option delete 'mo_ldap_local_email_domain'
wp option delete 'mo_ldap_local_mapping_value_default'
wp option delete 'mo_ldap_local_admin_fname'
wp option delete 'mo_ldap_local_admin_lname'
wp option delete 'mo_ldap_local_admin_company'
wp option delete 'mo_ldap_local_enable_admin_wp_login'
wp option delete 'mo_ldap_local_enable_role_mapping'
wp option delete 'mo_ldap_local_keep_existing_user_roles'
wp option delete 'user_logs_table_exists'
wp option delete 'mo_ldap_local_directory_server'
wp option delete 'mo_ldap_local_ldap_protocol'
wp option delete 'mo_ldap_local_ldap_port_number'
wp option delete 'mo_ldap_local_ldap_server_address'
wp option delete 'mo_ldap_local_save_config_status'
wp option delete 'mo_ldap_export'
wp option delete 'mo_ldap_local_admin_token'
wp option delete 'mo_ldap_local_registration_status'
wp option delete 'mo_ldap_local_user_table_updated'
wp option delete 'mo_ldap_local_user_report_log'
wp option delete 'mo_ldap_directory_server_custom_value'
wp option delete 'mo_ldap_local_ldaps_port_number'
wp option delete 'import_flag'
wp option delete 'mo_ldap_local_email_count'
wp option delete 'mo_ldap_local_sms_count'
wp option delete 'mo_ldap_local_anonymous_bind'
wp option delete 'mo_ldap_local_enable_log_requests'
wp option delete 'mo_ldap_local_role_mapping_count'
wp db query "DELETE FROM wp_options WHERE option_name LIKE 'mo_ldap_local_mapping_key_%'"
wp db query "DELETE FROM wp_options WHERE option_name LIKE 'mo_ldap_local_mapping_value_%'"
wp option delete 'mo_ldap_local_company'
wp option delete 'mo_ldap_local_mapping_memberof_attribute'
wp option delete 'mo_ldap_local_skip_redirectto_parameter'
wp option delete 'mo_ldap_local_empty_pointers'
wp option delete 'mo_ldap_local_search_bases_list'

# Delete Transients
wp transient delete 'mo_ldap_local_is_config_success'

# Direct DB Queries (Fallback)
wp db query "DELETE FROM wp_postmeta WHERE meta_key = 'mo_ldap_user_dn'"
wp db query "DELETE FROM wp_usermeta WHERE meta_key = 'mo_ldap_user_dn'"
wp db query "DELETE FROM wp_termmeta WHERE meta_key = 'mo_ldap_user_dn'"
wp db query "DELETE FROM wp_commentmeta WHERE meta_key = 'mo_ldap_user_dn'"
