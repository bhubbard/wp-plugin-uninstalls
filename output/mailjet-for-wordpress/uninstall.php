<?php

// If uninstall not called from WordPress, then exit.
if ( ! defined( 'WP_UNINSTALL_PLUGIN' ) ) {
	exit;
}

// Delete Options
delete_option('mailjet_multisite_support');
delete_site_option('mailjet_multisite_support');
delete_option('mailjet_woo_abandoned_cart_activate');
delete_site_option('mailjet_woo_abandoned_cart_activate');
delete_option('api_credentials_ok');
delete_site_option('api_credentials_ok');
delete_option('mailjet_apikey');
delete_site_option('mailjet_apikey');
delete_option('mailjet_apisecret');
delete_site_option('mailjet_apisecret');
delete_option('mailjet_activate_logger');
delete_site_option('mailjet_activate_logger');
delete_option('settings_step');
delete_site_option('settings_step');
delete_option('activate_mailjet_sync');
delete_site_option('activate_mailjet_sync');
delete_option('mailjet_sync_list');
delete_site_option('mailjet_sync_list');
delete_option('activate_mailjet_initial_sync');
delete_site_option('activate_mailjet_initial_sync');
delete_option('create_contact_list_btn');
delete_site_option('create_contact_list_btn');
delete_option('create_list_name');
delete_site_option('create_list_name');
delete_option('skip_mailjet_list');
delete_site_option('skip_mailjet_list');
delete_option('mailjet_enabled');
delete_site_option('mailjet_enabled');
delete_option('mailjet_from_name');
delete_site_option('mailjet_from_name');
delete_option('mailjet_from_email');
delete_site_option('mailjet_from_email');
delete_option('mailjet_port');
delete_site_option('mailjet_port');
delete_option('mailjet_ssl');
delete_site_option('mailjet_ssl');
delete_option('mailjet_from_email_extra');
delete_site_option('mailjet_from_email_extra');
delete_option('mailjet_from_email_extra_hidden');
delete_site_option('mailjet_from_email_extra_hidden');
delete_option('mailjet_test_address');
delete_site_option('mailjet_test_address');
delete_option('send_test_email_btn');
delete_site_option('send_test_email_btn');
delete_option('activate_mailjet_comment_authors_sync');
delete_site_option('activate_mailjet_comment_authors_sync');
delete_option('mailjet_comment_authors_list');
delete_site_option('mailjet_comment_authors_list');
delete_option('activate_mailjet_woo_integration');
delete_site_option('activate_mailjet_woo_integration');
delete_option('mailjet_woo_edata_sync');
delete_site_option('mailjet_woo_edata_sync');
delete_option('mailjet_woo_checkout_checkbox');
delete_site_option('mailjet_woo_checkout_checkbox');
delete_option('mailjet_woo_checkout_box_text');
delete_site_option('mailjet_woo_checkout_box_text');
delete_option('mailjet_woo_register_checkbox');
delete_site_option('mailjet_woo_register_checkbox');
delete_option('mailjet_woo_register_box_text');
delete_site_option('mailjet_woo_register_box_text');
delete_option('mailjet_woo_banner_checkbox');
delete_site_option('mailjet_woo_banner_checkbox');
delete_option('mailjet_woo_banner_text');
delete_site_option('mailjet_woo_banner_text');
delete_option('mailjet_woo_banner_label');
delete_site_option('mailjet_woo_banner_label');
delete_option('activate_mailjet_cf7_integration');
delete_site_option('activate_mailjet_cf7_integration');
delete_option('activate_mailjet_cf7_sync');
delete_site_option('activate_mailjet_cf7_sync');
delete_option('mailjet_cf7_list');
delete_site_option('mailjet_cf7_list');
delete_option('cf7_email');
delete_site_option('cf7_email');
delete_option('cf7_fromname');
delete_site_option('cf7_fromname');
delete_option('crypto_hash');
delete_site_option('crypto_hash');
delete_option('contacts_list_ok');
delete_site_option('contacts_list_ok');
delete_option('activate_mailjet_woo_sync');
delete_site_option('activate_mailjet_woo_sync');
delete_option('mailjet_plugin_version');
delete_site_option('mailjet_plugin_version');
delete_option('mailjet_access_administrator');
delete_site_option('mailjet_access_administrator');
delete_option('mailjet_access_author');
delete_site_option('mailjet_access_author');
delete_option('mailjet_access_editor');
delete_site_option('mailjet_access_editor');
delete_option('mailjet_access_contributor');
delete_site_option('mailjet_access_contributor');
delete_option('mailjet_access_subscriber');
delete_site_option('mailjet_access_subscriber');
delete_option('mailjet_thank_you_page_Italian');
delete_site_option('mailjet_thank_you_page_Italian');
delete_option('mailjet_thank_you_page_Spanish');
delete_site_option('mailjet_thank_you_page_Spanish');
delete_option('mailjet_thank_you_page_German');
delete_site_option('mailjet_thank_you_page_German');
delete_option('mailjet_thank_you_page_English');
delete_site_option('mailjet_thank_you_page_English');
delete_option('mailjet_thank_you_page_French');
delete_site_option('mailjet_thank_you_page_French');
delete_option('mailjet_locale_subscription_list_it_IT');
delete_site_option('mailjet_locale_subscription_list_it_IT');
delete_option('mailjet_locale_subscription_list_es_ES');
delete_site_option('mailjet_locale_subscription_list_es_ES');
delete_option('mailjet_locale_subscription_list_en_US');
delete_site_option('mailjet_locale_subscription_list_en_US');
delete_option('mailjet_locale_subscription_list_fr_FR');
delete_site_option('mailjet_locale_subscription_list_fr_FR');
delete_option('mailjet_locale_subscription_list_de_DE');
delete_site_option('mailjet_locale_subscription_list_de_DE');
delete_option('mailjet_post_update_message');
delete_site_option('mailjet_post_update_message');
delete_option('mj_profile_name');
delete_site_option('mj_profile_name');
delete_option('mailjet_woo_abandoned_cart_sending_time');
delete_site_option('mailjet_woo_abandoned_cart_sending_time');
global $wpdb;
$options = $wpdb->get_col( $wpdb->prepare( "SELECT option_name FROM {$wpdb->options} WHERE option_name LIKE %s", 'mailjet_%' ) );
foreach ( $options as $opt ) {
	delete_option( $opt );
	delete_site_option( $opt );
}
delete_option('mailjet_wc_active_hooks');
delete_site_option('mailjet_wc_active_hooks');
delete_option('mailjet_order_notifications');
delete_site_option('mailjet_order_notifications');
delete_option('mailjet_wc_abandoned_cart_active_hooks');
delete_site_option('mailjet_wc_abandoned_cart_active_hooks');
delete_option('widget_wp_mailjet_subscribe_widget');
delete_site_option('widget_wp_mailjet_subscribe_widget');
delete_option('widget_mailjet');
delete_site_option('widget_mailjet');
delete_option('mailjet_woocommerce_abandoned_cart');
delete_site_option('mailjet_woocommerce_abandoned_cart');
delete_option('mailjet_woocommerce_order_confirmation');
delete_site_option('mailjet_woocommerce_order_confirmation');
delete_option('mailjet_woocommerce_shipping_confirmation');
delete_site_option('mailjet_woocommerce_shipping_confirmation');
delete_option('mailjet_woocommerce_refund_confirmation');
delete_site_option('mailjet_woocommerce_refund_confirmation');
delete_option('mailjet_widget_options');
delete_site_option('mailjet_widget_options');

// Clear Cron Jobs
wp_clear_scheduled_hook('bl_cron_hook');
wp_clear_scheduled_hook('abandoned_cart_cron_hook');

// Clear Metadata
global $wpdb;
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", 'mailjet_subscribe_ok' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", 'mailjet_subscribe_ok' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", 'mailjet_subscribe_ok' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", 'mailjet_subscribe_ok' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", 'mailjet_woo_subscribe_ok' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", 'mailjet_woo_subscribe_ok' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", 'mailjet_woo_subscribe_ok' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", 'mailjet_woo_subscribe_ok' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->postmeta} WHERE meta_key = %s", 'processing_email_sent' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->usermeta} WHERE meta_key = %s", 'processing_email_sent' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->termmeta} WHERE meta_key = %s", 'processing_email_sent' ) );
$wpdb->query( $wpdb->prepare( "DELETE FROM {$wpdb->commentmeta} WHERE meta_key = %s", 'processing_email_sent' ) );

